<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>15&nbsp; More Logistic Regression – Advanced Modeling and Reproducibility for Educational Scientists</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./05-00-modeling-nonindependence.html" rel="next">
<link href="./04-02-logistic-regression.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ed04999718f06b735b1f8009dce43b94.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-7c121de436c7c20b050f1da4c0bef0bb.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="assets/sticky-notes.css">
<link rel="stylesheet" href="assets/table-styles.css">
</head>

<body class="nav-sidebar floating fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./04-00-modeling-dichotomous-outcomes.html">Modeling Dichotomous Outcomes</a></li><li class="breadcrumb-item"><a href="./04-03-more-logistic-regression.html"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">More Logistic Regression</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Advanced Modeling and Reproducibility for Educational Scientists</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Front Matter</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./01-00-reproducibility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Statistical Reproducibility</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-02-project-organization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Project Organization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-03-introduction-to-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction to Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-04-more-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">More Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-05-creating-tables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Creating Tables with gt</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./02-00-likelihood.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Likelihood</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-01-mathematical-foundations-probability-density.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Mathematical Foundations: Probability Density</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-03-likelihood-framework-for-evidence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Likelihood: A Framework for Evidence</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-04-likelihood-framework-for-estimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Likelihood: A Framework for Estimation</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./03-00-modeling-nonlinearity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modeling Nonlinearity</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-01-polynomial-effects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Polynomial Effects</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-02-information-criteria-and-model-selection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Information Criteria and Model Selection</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-03-logarithmic-transformations-predictor.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Log-Transforming the Predictor</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-04-logarithmic-transformations-outcome.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Log-Transforming the Outcome</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-05-rule-of-the-bulge.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Rule of the Bulge—An Example”</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./04-00-modeling-dichotomous-outcomes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modeling Dichotomous Outcomes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-01-linear-probability-model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Linear Probability Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-02-logistic-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Logistic Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-03-more-logistic-regression.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">More Logistic Regression</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./05-00-modeling-nonindependence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modeling Nonindependence</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-01-introduction-to-mixed-effects-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Introduction to Mixed-Effects Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-02-lmer-average-change-over-time.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">LMER: Average Change Over Time</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-03-lmer-other-random-effects-and-covariates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">LMER: Other Random-Effects and Covariates</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-04-lmer-alt-representations-and-assumptions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Linear Mixed-Effects Models: Alternative Representations and Assumptions</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./04-00-modeling-dichotomous-outcomes.html">Modeling Dichotomous Outcomes</a></li><li class="breadcrumb-item"><a href="./04-03-more-logistic-regression.html"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">More Logistic Regression</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">More Logistic Regression</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Quarto Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="preparation" class="level2" data-number="15.1">
<h2 data-number="15.1" class="anchored" data-anchor-id="preparation"><span class="header-section-number">15.1</span> Preparation</h2>
<p>In this chapter, you will expand your knowledge of the logistic regression model to include categorical predictors, non-linear predictor effects, covariates, and interaction terms. We will again use data from the file <em>graduation.csv</em> to explore predictors of college graduation.</p>
<ul>
<li><a href="https://raw.githubusercontent.com/zief0002/fluffy-ants/main/data/graduation.csv">CSV File</a></li>
<li><a href="http://zief0002.github.io/fluffy-ants/codebooks/graduation.html">Data Codebook</a></li>
</ul>
<p>Within the analysis, we will focus on the research question of whether the probability of obtaining a degree differs for first and non-first generation students. We will use information criteria as the framework of evidence to adopt different models, along with an evaluation of the models’ residuals.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(AICcmodavg)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(performance)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(texreg)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in data and create dummy variable for categorical variables</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>grad <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://raw.githubusercontent.com/zief0002/fluffy-ants/main/data/graduation.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">got_degree =</span> <span class="fu">if_else</span>(degree <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_firstgen =</span> <span class="fu">if_else</span>(first_gen <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_nontrad =</span> <span class="fu">if_else</span>(non_traditional <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># View data</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>grad</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,344 × 10
   student degree   act scholarship ap_courses first_gen non_traditional
     &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;          
 1       1 Yes       21         0            0 No        No             
 2       2 Yes       19         0            0 No        No             
 3       3 Yes       27         0            0 Yes       No             
 4       4 Yes       25         0.5          0 Yes       No             
 5       5 No        28         0           17 Yes       No             
 6       6 Yes       21         0            0 No        Yes            
 7       7 Yes       27         0            8 Yes       No             
 8       8 No        20         0            0 No        No             
 9       9 Yes       26         0            0 Yes       No             
10      10 Yes       25         0            4 Yes       No             
# ℹ 2,334 more rows
# ℹ 3 more variables: got_degree &lt;dbl&gt;, is_firstgen &lt;dbl&gt;, is_nontrad &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit models from previous notes</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.0</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.1</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> act, <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</section>
<section id="categorical-predictors" class="level2" data-number="15.2">
<h2 data-number="15.2" class="anchored" data-anchor-id="categorical-predictors"><span class="header-section-number">15.2</span> Categorical Predictors</h2>
<p>We will next turn to evaluating whether first generation students have a different predicted probability of obtaining a degree than non-first generation students. As always, we start with computing summary statistics and plots. Because both the predictor and outcome are categorical, we will again focus on counts and proportions.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Counts of students by degree and first gen status</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>grad <span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(degree, first_gen) <span class="sc">|&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> <span class="fu">n</span>()</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
# Groups:   degree [2]
  degree first_gen     N
  &lt;chr&gt;  &lt;chr&gt;     &lt;int&gt;
1 No     No          267
2 No     Yes         360
3 Yes    No          440
4 Yes    Yes        1277</code></pre>
</div>
</div>
<p><br></p>
<section id="contingency-tables" class="level3" data-number="15.2.1">
<h3 data-number="15.2.1" class="anchored" data-anchor-id="contingency-tables"><span class="header-section-number">15.2.1</span> Contingency Tables</h3>
<p>The primary method of displaying summary information when both the predictor and outcome are categorical is via a <strong>contingency table</strong>. In our two-way table, we will display counts from the four different combinations of first generation and degree obtainment status. Since each of those variables includes two levels (degree/no degree and first gen/non-first gen), this is referred to as a 2x2 table; each number refers to the number of levels in one of the variables being displayed.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>tab_01 <span class="ot">=</span> <span class="fu">data.frame</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">first_gen =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>, <span class="st">"Total"</span>),</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">no =</span> <span class="fu">c</span>(<span class="dv">267</span>, <span class="dv">360</span>, <span class="dv">627</span>),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">yes =</span> <span class="fu">c</span>(<span class="dv">440</span>, <span class="dv">1277</span>, <span class="dv">1717</span>),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">total =</span> <span class="fu">c</span>(<span class="dv">707</span>, <span class="dv">1637</span>, <span class="dv">2344</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create table</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>tab_01 <span class="sc">|&gt;</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">first_gen =</span> <span class="fu">md</span>(<span class="st">"*First Generation Status*"</span>),</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">no =</span> <span class="fu">md</span>(<span class="st">"No"</span>),</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">yes =</span> <span class="fu">md</span>(<span class="st">"Yes"</span>),</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">total =</span> <span class="fu">md</span>(<span class="st">"Total"</span>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(first_gen),</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">"left"</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(no, yes, total),</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">"center"</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">md</span>(<span class="st">"*Obtained Degree*"</span>),</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(no, yes)</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">align =</span> <span class="st">"left"</span>, <span class="at">indent =</span> <span class="fu">px</span>(<span class="dv">20</span>)),</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">locations =</span> <span class="fu">cells_body</span>(</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>          <span class="at">columns =</span> first_gen,</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>          <span class="at">rows =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-first-gen" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-layout-align="center">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-first-gen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;15.1: 2x2 table of counts for degree obtainment by first generation status.
</figcaption>
<div aria-describedby="tbl-first-gen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="fhfraikean" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#fhfraikean table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#fhfraikean thead, #fhfraikean tbody, #fhfraikean tfoot, #fhfraikean tr, #fhfraikean td, #fhfraikean th {
  border-style: none;
}

#fhfraikean p {
  margin: 0;
  padding: 0;
}

#fhfraikean .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fhfraikean .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#fhfraikean .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fhfraikean .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fhfraikean .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fhfraikean .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fhfraikean .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fhfraikean .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fhfraikean .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fhfraikean .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fhfraikean .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fhfraikean .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fhfraikean .gt_spanner_row {
  border-bottom-style: hidden;
}

#fhfraikean .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#fhfraikean .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fhfraikean .gt_from_md > :first-child {
  margin-top: 0;
}

#fhfraikean .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fhfraikean .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fhfraikean .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#fhfraikean .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#fhfraikean .gt_row_group_first td {
  border-top-width: 2px;
}

#fhfraikean .gt_row_group_first th {
  border-top-width: 2px;
}

#fhfraikean .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fhfraikean .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#fhfraikean .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#fhfraikean .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fhfraikean .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fhfraikean .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fhfraikean .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#fhfraikean .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fhfraikean .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fhfraikean .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fhfraikean .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fhfraikean .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fhfraikean .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fhfraikean .gt_left {
  text-align: left;
}

#fhfraikean .gt_center {
  text-align: center;
}

#fhfraikean .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fhfraikean .gt_font_normal {
  font-weight: normal;
}

#fhfraikean .gt_font_bold {
  font-weight: bold;
}

#fhfraikean .gt_font_italic {
  font-style: italic;
}

#fhfraikean .gt_super {
  font-size: 65%;
}

#fhfraikean .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#fhfraikean .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#fhfraikean .gt_indent_1 {
  text-indent: 5px;
}

#fhfraikean .gt_indent_2 {
  text-indent: 10px;
}

#fhfraikean .gt_indent_3 {
  text-indent: 15px;
}

#fhfraikean .gt_indent_4 {
  text-indent: 20px;
}

#fhfraikean .gt_indent_5 {
  text-indent: 25px;
}

#fhfraikean .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#fhfraikean div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="gt_col_headings gt_spanner_row header">
<th rowspan="2" id="first_gen" class="gt_col_heading gt_columns_bottom_border gt_left" style="text-align: left;" data-quarto-table-cell-role="th" scope="col"><em>First Generation Status</em></th>
<th colspan="2" id="*Obtained Degree*" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><div class="gt_column_spanner">
<em>Obtained Degree</em>
</div></th>
<th rowspan="2" id="total" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Total</th>
</tr>
<tr class="gt_col_headings even">
<th id="no" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">No</th>
<th id="yes" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Yes</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="first_gen" style="text-align: left; text-indent: 20px;">No</td>
<td class="gt_row gt_center" headers="no">267</td>
<td class="gt_row gt_center" headers="yes">440</td>
<td class="gt_row gt_center" headers="total">707</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="first_gen" style="text-align: left; text-indent: 20px;">Yes</td>
<td class="gt_row gt_center" headers="no">360</td>
<td class="gt_row gt_center" headers="yes">1277</td>
<td class="gt_row gt_center" headers="total">1637</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" style="text-align: left;" headers="first_gen">Total</td>
<td class="gt_row gt_center" headers="no">627</td>
<td class="gt_row gt_center" headers="yes">1717</td>
<td class="gt_row gt_center" headers="total">2344</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>There are three types of counts (sample sizes) that are typically included in contingency tables:</p>
<ol type="1">
<li><strong>Cell Counts:</strong> The “cells” in the two-way table include counts for the four combinations of first generation and degree obtainment status. The counts in those four cells are referred to as <em>cell counts</em> or cell sample sizes. These are generally notated symbolically as <span class="math inline">\(n_{i,j}\)</span> where <em>i</em> indicates the row and <em>j</em> indicates the column. For example, <span class="math inline">\(n_{1,2}=440\)</span> indicates the number of non-first generation students who obtained a degree.</li>
<li><strong>Marginal Counts:</strong> The counts in the “Total” row and column are called the <em>marginal counts</em>, or marginal sample sizes. They indicate the total counts collapsing across either rows or columns. These are generally notated symbolically as <span class="math inline">\(n_{\bullet,j}\)</span> or <span class="math inline">\(n_{i, \bullet}\)</span> where the dot indicates that we are collapsing across either rows or columns. For example, <span class="math inline">\(n_{2,\bullet}=1637\)</span> indicates the number of first generation students.</li>
<li><strong>Grand Count:</strong> Finally, there is the cell that includes the grand total sample size. This is usually just denoted as <em>N</em> (or sometimes <span class="math inline">\(n_{\bullet,\bullet}\)</span>). In our example, <span class="math inline">\(n=2344\)</span>, the total number of students in the sample.</li>
</ol>
<p>The three different totals (row total, column total, grand total) means that we can compute three different proportions for each of the four cells. Each proportion has a different interpretation depending on which total is used in the denominator. For example, consider the cell that designates first generation students who obtained a degree (<span class="math inline">\(n_{2,2}=1227\)</span>).</p>
<ul>
<li>The grand total of 2344 indicates all student, so computing the proportion using that denominator, <span class="math inline">\(1227/2344 = 0.523\)</span>, indicates that 0.523 of all students are first generation who obtained a degree.</li>
<li>The row total of 1637 indicates the number of students who are first generation students, so computing the proportion using that denominator, <span class="math inline">\(1227/1637 = 0.750\)</span>, indicates that 0.750 of all first generation students obtained a degree.</li>
<li>The column total of 1717 indicates the number of students who obtained a degree, so computing the proportion using that denominator, <span class="math inline">\(1227/1717 = 0.715\)</span>, indicates that 0.715 of students who obtained a degree are first generation students.</li>
</ul>
<p><br></p>
</section>
<section id="computing-proportions-order-in-group_by-matters" class="level3" data-number="15.2.2">
<h3 data-number="15.2.2" class="anchored" data-anchor-id="computing-proportions-order-in-group_by-matters"><span class="header-section-number">15.2.2</span> Computing Proportions: Order in <code>group_by()</code> Matters</h3>
<p>We can compute proportions using the row and column totals in the denominator by using the same set of dplyr operations we used previously, namely grouping by the predictor and outcome, summarizing to compute the sample size, and then mutating to find the proportion. The key is the order in which we include the variables in <code>group_by()</code>.</p>
<p>If we want to use the row totals (the number of first generation and non-first generation students) in the denominator, we need to include <code>first_gen</code> in the <code>group_by()</code> prior to <code>degree</code>. The computation of <code>sum()</code> in <code>mutate()</code> will continue to be based on the first generation grouping (<code>group_by()</code> is in effect until we explicitly use <code>ungroup()</code>).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use first generations status totals in proportion</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>grad <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(first_gen, degree) <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Prop =</span> N <span class="sc">/</span> <span class="fu">sum</span> (N)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
# Groups:   first_gen [2]
  first_gen degree     N  Prop
  &lt;chr&gt;     &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt;
1 No        No       267 0.378
2 No        Yes      440 0.622
3 Yes       No       360 0.220
4 Yes       Yes     1277 0.780</code></pre>
</div>
</div>
<p>To compute proportions based on the number of students who obtained a degree and the number who did not obtain a degree, we need to include <code>degree</code> in the <code>group_by()</code> function prior to <code>first_gen</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use degree status totals in proportion</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>grad <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(degree, first_gen) <span class="sc">|&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Prop =</span> N <span class="sc">/</span> <span class="fu">sum</span> (N)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
# Groups:   degree [2]
  degree first_gen     N  Prop
  &lt;chr&gt;  &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt;
1 No     No          267 0.426
2 No     Yes         360 0.574
3 Yes    No          440 0.256
4 Yes    Yes        1277 0.744</code></pre>
</div>
</div>
<p>If you want to base the proportions on the grand total, the order in <code>group_by()</code> doesn’t matter, but you need to explicitly <code>ungroup()</code> prior to computing the proportions.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use grand total in proportion</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>grad <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(degree, first_gen) <span class="sc">|&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Prop =</span> N <span class="sc">/</span> <span class="fu">sum</span> (N)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  degree first_gen     N  Prop
  &lt;chr&gt;  &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt;
1 No     No          267 0.114
2 No     Yes         360 0.154
3 Yes    No          440 0.188
4 Yes    Yes        1277 0.545</code></pre>
</div>
</div>
<div class="fyi">
<p><strong>FYI</strong></p>
<p>You need to select the the denominator to compute your proportions based on your research questions. You also need to make sure that if you are using R (or another software) to compute proportions that the proportions you want are being outputted.</p>
</div>
<p><br></p>
</section>
<section id="back-to-the-rq" class="level3" data-number="15.2.3">
<h3 data-number="15.2.3" class="anchored" data-anchor-id="back-to-the-rq"><span class="header-section-number">15.2.3</span> Back to the RQ</h3>
<p>We wanted to know whether first generation students have a different predicted probability of obtaining a degree than non-first generation students. Thus, we want to use the row totals in our denominator. So we are comparing the proportion of all first generation students who got a degree to the proportion of all non-first generation students who got a degree.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportions to answer our RQ</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>grad <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(first_gen, degree) <span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Prop =</span> N <span class="sc">/</span> <span class="fu">sum</span> (N)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(degree <span class="sc">==</span> <span class="st">"Yes"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  first_gen degree     N  Prop
  &lt;chr&gt;     &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt;
1 No        Yes      440 0.622
2 Yes       Yes     1277 0.780</code></pre>
</div>
</div>
<p>Based on the sample proportions, the proportion of first generation students who obtain a degree (0.780) is higher by 0.158 than the proportion of non-first generation students who obtain a degree (0.622). We could also plot this using a bar chart. The argument <code>position=position_dodge()</code> creates the side-by-side plot. Otherwise the plot would be a stacked bar chart which gives the same information.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Side-by-side bar chart</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>grad <span class="sc">|&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(first_gen, degree) <span class="sc">|&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Prop =</span> N <span class="sc">/</span> <span class="fu">sum</span> (N)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> first_gen, <span class="at">y =</span> Prop, <span class="at">fill =</span> degree)) <span class="sc">+</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"Identity"</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>()) <span class="sc">+</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">"First Generation"</span>) <span class="sc">+</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"Proportion"</span>) <span class="sc">+</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">name =</span> <span class="st">"Obtained</span><span class="sc">\n</span><span class="st"> Degree"</span>,</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#2EC4B6"</span>, <span class="st">"#E71D36"</span>)</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>      )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="04-03-more-logistic-regression_files/figure-html/side-by-side-bar-chart-1.png" class="img-fluid figure-img" style="width:70.0%" alt="Side-by-side barplot showing the proportion of first generation and non-first generation students in the sample who obtained and did not obtain a degree."></p>
<figcaption>Side-by-side barplot showing the proportion of first generation and non-first generation students in the sample who obtained and did not obtain a degree.</figcaption>
</figure>
</div>
</div>
</div>
<p>To evaluate whether this sample difference is more than we expect because of chance, we could create a dummy-coded indicator for first generation status and use that as a predictor in our logistic regression model.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dummy code first_gen</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>grad <span class="ot">=</span> grad <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_firstgen =</span> <span class="fu">if_else</span>(first_gen <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit  model</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.2</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen, <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate first generation predictor</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="fu">aictab</span>(</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">cand.set =</span> <span class="fu">list</span>(glm<span class="fl">.0</span>, glm<span class="fl">.2</span>),</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">modnames =</span> <span class="fu">c</span>(<span class="st">"Intercept-Only"</span>, <span class="st">"Effect of First Gen"</span>)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Model selection based on AICc:

                    K    AICc Delta_AICc AICcWt Cum.Wt       LL
Effect of First Gen 2 2666.09       0.00      1      1 -1331.04
Intercept-Only      1 2724.55      58.46      0      1 -1361.27</code></pre>
</div>
</div>
<p>Given the data and candidate models, the model that includes first generation status in the model has more evidence. Since we are comparing to the intercept-only model in this output, We can also use the information in the residual deviance column to compute a pseudo-<span class="math inline">\(R^2\)</span> value.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute pseudo R2</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>(<span class="fl">2722.6</span> <span class="sc">-</span> <span class="fl">2662.1</span>) <span class="sc">/</span> <span class="fl">2722.6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.02222141</code></pre>
</div>
</div>
<p>The pseudo-<span class="math inline">\(R^2\)</span> value of 0.022 is close to 0, which suggests that first generation status although statistically relevant, is not incredibly predictive of the log-odds (or odds or probability) of obtaining a degree. Next we turn to the fitted equation:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get coefficients</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(glm<span class="fl">.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) is_firstgen 
  0.4995261   0.7666388 </code></pre>
</div>
</div>
<p>Based on this output, the fitted equation for the model is:</p>
<p><span class="math display">\[
\ln \bigg( \frac{\hat\pi_i}{1 - \hat\pi_i}\bigg) = 0.50+ 0.77(\mathrm{First~Generation}_i)
\]</span></p>
<p>Interpreting these coefficients in the log-odds metric:</p>
<ul>
<li>Non-first generation students’ predicted log-odds of obtaining a degree is 0.50.</li>
<li>First generation students’ predicted log-odds of obtaining a degree is 0.767 higher than non-first generation students.</li>
</ul>
<p>To determine first generation students’ log-odds of obtaining a degree, we substitute 1 into the fitted equation:</p>
<p><span class="math display">\[
\begin{split}
\ln \bigg( \frac{\hat\pi_i}{1 - \hat\pi_i}\bigg) &amp;= 0.50+ 0.77(1) \\[1ex]
&amp;= 1.27
\end{split}
\]</span></p>
<p>We can also transform the fitted equation into the odds metric and interpret.</p>
<p><span class="math display">\[
\frac{\hat\pi_i}{1 - \hat\pi_i} = e^{0.50} \times e^{0.77(\mathrm{First~Generation}_i)}
\]</span></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform coefficients to odds metric</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="fu">coef</span>(glm<span class="fl">.2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) is_firstgen 
   1.647940    2.152519 </code></pre>
</div>
</div>
<p>Interpreting these coefficients in the odds metric:</p>
<ul>
<li>Non-first generation students’ predicted odds of obtaining a degree is 1.65. That is their probability of obtaining a degree is 1.64 times that of not obtaining a degree.</li>
<li>First generation students’ predicted odds of obtaining a degree is 2.15 times higher than non-first generation students’ odds of obtaining a degree.</li>
</ul>
<p>To determine first generation students’ odds of obtaining a degree, we can either substitute 1 into the transformed fitted equation:</p>
<p><span class="math display">\[
\begin{split}
\ln \bigg( \frac{\hat\pi_i}{1 - \hat\pi_i}\bigg) &amp;= e^{0.50} \times e^{0.77(1)} \\[1ex]
&amp;= 3.56
\end{split}
\]</span></p>
<p>Or we could have transformed their log-odds directly (<span class="math inline">\(e^{1.27}=3.56\)</span>). Finally, we could also transform the equation into the probability metric.</p>
<p><span class="math display">\[
\hat\pi_i = \frac{e^{0.50+ 0.77(\mathrm{First~Generation}_i)}}{1 + e^{0.50+ 0.77(\mathrm{First~Generation}_i)}}
\]</span></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prob non-first gen students</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="fl">0.50</span>) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="fu">exp</span>(<span class="fl">0.50</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6224593</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prob first gen students</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="fl">0.50</span> <span class="sc">+</span> <span class="fl">0.77</span>) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="fu">exp</span>(<span class="fl">0.50</span> <span class="sc">+</span> <span class="fl">0.77</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7807427</code></pre>
</div>
</div>
<p>In the probability metric we just compute the predicted probabilities and report/compare them. There is no easy conversion of the slope coefficient to interpret how much higher the probability of obtaining a degree for first generation students is than for non-first generation students.</p>
<p><br></p>
</section>
<section id="evaluating-assumptions" class="level3" data-number="15.2.4">
<h3 data-number="15.2.4" class="anchored" data-anchor-id="evaluating-assumptions"><span class="header-section-number">15.2.4</span> Evaluating Assumptions</h3>
<p>When the only predictor in a logistic model is categorical, the only thing we need to pay attention to is whether the average residual for each level of the predictor is close to 0. We can again use the <code>binned_residuals()</code> function to evaluate this. When the predictor is categorical, the binning will be done on the levels of the predictor.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtain average fitted values and average residuals</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>out<span class="fl">.2</span> <span class="ot">=</span> <span class="fu">binned_residuals</span>(glm<span class="fl">.2</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View data frame</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(out<span class="fl">.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               xbar       ybar    n      x.lo      x.hi         se     CI_low
conf_int  0.6223479 0.07908158  707 0.6223479 0.6223479 0.08473425 0.04270069
conf_int1 0.7800855 0.16704062 1637 0.7800855 0.7800855 0.04907564 0.14668272
            CI_high group
conf_int  0.1154625   yes
conf_int1 0.1873985    no</code></pre>
</div>
</div>
<p>Here we see the average residual (<code>ybar</code>) for both groups is near zero. This satisfies the linearity assumption. If you examined the binned residual plot, you would also see this, albeit in a graphical form.</p>
<p>The results from <code>glm.2</code> indicated that there were differences between first and non-first generation students in the probability of obtaining a degree. Based on this model’s result, we found that the predicted probability of obtaining a degre for first generation students was 0.780 while that for non-first generation students was 0.622. Does this difference persist after controlling for other covariates?</p>
<p>To examine this, we want to fit a set of models that systematically include potential covariates along with first generation status. Our strategy for this is to start with the most important covariate. We can compare the model that includes first generation status and this covariate to a model that just includes first generation status. If the evidence indicates that the model with only first generation status is important we are done. If the evidence points toward the model that also includes the most important covariate, then we will continue by comparing that model to one that includes first generation status and the two most important covariates. We will continue with these comparisons until we adopt a final model or models.</p>
<p>To determine the order of importance, we can compute the correlations between each covariate and the dummy-coded outcome.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlations</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>grad <span class="sc">|&gt;</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(got_degree, act, scholarship, ap_courses,is_nontrad) <span class="sc">|&gt;</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">correlate</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  term        got_degree    act scholarship ap_courses is_nontrad
  &lt;chr&gt;            &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1 got_degree     NA       0.195      0.142      0.149     -0.0841
2 act             0.195  NA          0.315      0.432     -0.103 
3 scholarship     0.142   0.315     NA          0.197     -0.0343
4 ap_courses      0.149   0.432      0.197     NA         -0.0552
5 is_nontrad     -0.0841 -0.103     -0.0343    -0.0552    NA     </code></pre>
</div>
</div>
<p>The rank ordering of covariates (based on the absolute value of the correlation coefficients) will be:</p>
<ul>
<li>ACT scores (<span class="math inline">\(r = 0.195\)</span>, most important)</li>
<li>Number of AP courses (<span class="math inline">\(r = 0.149\)</span>)</li>
<li>Scholarship amount (<span class="math inline">\(r = 0.142\)</span>)</li>
<li>Non-traditional status (<span class="math inline">\(r = -0.084\)</span>)</li>
</ul>
<p><br></p>
</section>
</section>
<section id="non-linear-effect-of-act" class="level2" data-number="15.3">
<h2 data-number="15.3" class="anchored" data-anchor-id="non-linear-effect-of-act"><span class="header-section-number">15.3</span> Non-Linear Effect of ACT</h2>
<p>To begin the analysis, we will include ACT scores as a covariate in the model. Since the <code>act</code> variable is continuous, we need to use the “correct” functional form when we include it in the model. In the previous set of notes, we saw some misfit when we examined the binned residual plot for the logistic regression model that included ACT as a predictor of the probability of obtaining a degree. One possibility is that this may be because the effect of ACT on these probabilities is non-linear. To examine this, we can plot the empirical log-odds of obtaining a degree versus ACT scores, and examine the functional form of the relationship.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtain the log-odds who obtain a degree for each ACT score</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>prop_grad <span class="ot">=</span> grad <span class="sc">|&gt;</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(act, degree) <span class="sc">|&gt;</span> </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Prop =</span> N <span class="sc">/</span> <span class="fu">sum</span> (N)</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(degree <span class="sc">==</span> <span class="st">"Yes"</span>) <span class="sc">|&gt;</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">Odds =</span> Prop <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> Prop),</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">Logits =</span> <span class="fu">log</span>(Odds)</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatterplot</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> prop_grad, <span class="fu">aes</span>(<span class="at">x =</span> act, <span class="at">y =</span> Logits)) <span class="sc">+</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> N)) <span class="sc">+</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">weight =</span> N), <span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ACT score"</span>) <span class="sc">+</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Log-odds of obtaining a degree"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-ln-odds-act" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Log-odds of obtaining a degree conditional on ACT score. Size of the dot is proportional to sample size. The loess smoother is also weighted based on the sample size." data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ln-odds-act-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04-03-more-logistic-regression_files/figure-html/fig-ln-odds-act-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%" alt="Log-odds of obtaining a degree conditional on ACT score. Size of the dot is proportional to sample size. The loess smoother is also weighted based on the sample size.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ln-odds-act-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;15.1: Log-odds of obtaining a degree conditional on ACT score. Size of the dot is proportional to sample size. The loess smoother is also weighted based on the sample size.
</figcaption>
</figure>
</div>
</div>
</div>
<p>This suggests a non-linear relationship between ACT score and the log-odds of obtaining a degree. Using the Rule-of-the-Bulge, we can try to linearize this relationship by:</p>
<ul>
<li>Including a quadratic effect of ACT; or</li>
<li>Log-transforming the ACT variable.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit non-linear models</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.1</span>_quad <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> act <span class="sc">+</span> <span class="fu">I</span>(act<span class="sc">^</span><span class="dv">2</span>), <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.1</span>_log <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> <span class="fu">log</span>(act), <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtain binned residuals</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>out<span class="fl">.1</span>_quad <span class="ot">=</span> <span class="fu">binned_residuals</span>(glm<span class="fl">.1</span>_quad)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>out<span class="fl">.1</span>_log <span class="ot">=</span> <span class="fu">binned_residuals</span>(glm<span class="fl">.1</span>_log)</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Binned residual plots</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(out<span class="fl">.1</span>_quad) <span class="sc">|</span> <span class="fu">plot</span>(out<span class="fl">.1</span>_log)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-residuals" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Binned residual plots for two models that include non-linear effects of ACT. The quadratic model (LEFT) and the log-linear model (RIGHT)." data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-residuals-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04-03-more-logistic-regression_files/figure-html/fig-residuals-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" alt="Binned residual plots for two models that include non-linear effects of ACT. The quadratic model (LEFT) and the log-linear model (RIGHT).">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-residuals-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;15.2: Binned residual plots for two models that include non-linear effects of ACT. The quadratic model (LEFT) and the log-linear model (RIGHT).
</figcaption>
</figure>
</div>
</div>
</div>
<p>The binned residuals show slight misfit to both the log-linear model and the quadratic model. We also examine the empirical support via information criteria.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aictab</span>(</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">cand.set =</span> <span class="fu">list</span>(glm<span class="fl">.1</span>, glm<span class="fl">.1</span>_quad, glm<span class="fl">.1</span>_log),</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">modnames =</span> <span class="fu">c</span>(<span class="st">"Linear Effect"</span>, <span class="st">"Quadratic Effect"</span>, <span class="st">"Log-Linear Effect"</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Model selection based on AICc:

                  K    AICc Delta_AICc AICcWt Cum.Wt       LL
Quadratic Effect  3 2632.13       0.00   0.51   0.51 -1313.06
Log-Linear Effect 2 2632.34       0.21   0.46   0.96 -1314.17
Linear Effect     2 2637.24       5.11   0.04   1.00 -1316.62</code></pre>
</div>
</div>
<p>Here the most empirically supported model (given the data and the candidate models) is the quadratic model, although there is also a great deal of support for the log-linear model. I would probably adopt the log-linear model based on its simplicity and the theoretical rationale that I would not expect the probability of graduating to be smaller for high ACT values. But, for pedagogical purposes, we will look at and interpret the output for both models.</p>
<p><br></p>
<section id="quadratic-effect-of-act" class="level3" data-number="15.3.1">
<h3 data-number="15.3.1" class="anchored" data-anchor-id="quadratic-effect-of-act"><span class="header-section-number">15.3.1</span> Quadratic Effect of ACT</h3>
<p>We will start our interpretation by examining the <code>coef()</code> output.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get coefficients</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(glm<span class="fl">.1</span>_quad)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> (Intercept)          act     I(act^2) 
-4.566663084  0.365752506 -0.005464371 </code></pre>
</div>
</div>
<p>The fitted model is:</p>
<p><span class="math display">\[
\ln \bigg( \frac{\hat\pi_i}{1 - \hat\pi_i}\bigg) = -4.57 + 0.37(\mathrm{ACT}_i) - 0.005(\mathrm{ACT}_i^2)
\]</span></p>
<p>Since this is an interaction model, we interpret the effect of ACT as: The effect of ACT on the log-odds of obtaining a degree depends on ACT. (We could also graph this effect if we were interested in the effect of ACT on the log-odds of obtaining a degree.)</p>
<p>Transforming the fitted equation to the odds metric:</p>
<p><span class="math display">\[
\frac{\hat\pi_i}{1 - \hat\pi_i} = e^{-4.57} \times e^{0.37(\mathrm{ACT}_i)} \times e^ {-0.005(\mathrm{ACT}_i^2)}
\]</span></p>
<p>Because changing ACT now impacts two exponent terms, one of which includes the quadratic of ACT, it is super essential that we create a plot to interpret the effects of ACT on the odds of obtaining a degree.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the fitted equation</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> grad, <span class="fu">aes</span>(<span class="at">x =</span> act, <span class="at">y =</span> got_degree)) <span class="sc">+</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">4.57</span> <span class="sc">+</span> <span class="fl">0.37</span><span class="sc">*</span>x <span class="sc">-</span> <span class="fl">0.005</span><span class="sc">*</span>x<span class="sc">^</span><span class="dv">2</span>)}</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ACT score"</span>) <span class="sc">+</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted odds of obtaining a degree"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-quad-fitted" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Predicted odds of obtaining a degree as a function of ACT score." data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-quad-fitted-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04-03-more-logistic-regression_files/figure-html/fig-quad-fitted-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%" alt="Predicted odds of obtaining a degree as a function of ACT score.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-quad-fitted-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;15.3: Predicted odds of obtaining a degree as a function of ACT score.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The odds curve is somewhat “S”-shaped (although it is not constrained between 0 and 1 like the probability curve). This is because of the quadratic effect of ACT. The overall trend is one of exponential growth, although the rate-of-change is not constant within this curve. The most rapid change in the odds of obtaining a degree occurs at ACT scores between 20 and 30.</p>
<p>Finally, we could also transform the equation into the probability metric. The fitted equation is:</p>
<p><span class="math display">\[
\hat\pi_i = \frac{e^{-4.57 + 0.37(\mathrm{ACT}_i) - 0.005(\mathrm{ACT}_i^2)}}{1 + e^{-4.57 + 0.37(\mathrm{ACT}_i) - 0.005(\mathrm{ACT}_i^2)}}
\]</span></p>
<p>Again, it is worthwhile to create a plot to interpret the effects of ACT on the probability of obtaining a degree.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the fitted equation</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> grad, <span class="fu">aes</span>(<span class="at">x =</span> act, <span class="at">y =</span> got_degree)) <span class="sc">+</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">4.57</span> <span class="sc">+</span> <span class="fl">0.37</span><span class="sc">*</span>x <span class="sc">-</span> <span class="fl">0.005</span><span class="sc">*</span>x<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">4.57</span> <span class="sc">+</span> <span class="fl">0.37</span><span class="sc">*</span>x <span class="sc">-</span> <span class="fl">0.005</span><span class="sc">*</span>x<span class="sc">^</span><span class="dv">2</span>))}</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ACT score"</span>) <span class="sc">+</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted probability of obtaining a degree"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-quad-fitted-prob" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Predicted probability of obtaining a degree as a function of ACT score." data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-quad-fitted-prob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04-03-more-logistic-regression_files/figure-html/fig-quad-fitted-prob-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%" alt="Predicted probability of obtaining a degree as a function of ACT score.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-quad-fitted-prob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;15.4: Predicted probability of obtaining a degree as a function of ACT score.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The probability curve is “S”-shaped and constrained between 0 and 1. The left-hand side of the “S” is compressed, probably due to the range of ACT scores. ACT has the largest effect on the probability of obtaining a degree for scores less than 25, and then the effect begins to plateau (although it is still growing as the logistic curve is monotonic).</p>
<p><br></p>
</section>
<section id="log-linear-effect-of-act" class="level3" data-number="15.3.2">
<h3 data-number="15.3.2" class="anchored" data-anchor-id="log-linear-effect-of-act"><span class="header-section-number">15.3.2</span> Log-Linear Effect of ACT</h3>
<p>We will again start our interpretation by examining the <code>coef()</code> output.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get coefficients</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(glm<span class="fl">.1</span>_log)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept)    log(act) 
  -6.938715    2.500968 </code></pre>
</div>
</div>
<p>The fitted model is:</p>
<p><span class="math display">\[
\ln \bigg( \frac{\hat\pi_i}{1 - \hat\pi_i}\bigg) = -6.94 + 2.50\bigg[\ln(\mathrm{ACT}_i)\bigg]
\]</span></p>
<p>We interpret the effect of ACT as: Each 1% difference in ACT score is associated with a .025-unit change in the log-odds of obtaining a degree.</p>
<p>Transforming the fitted equation to the odds metric:</p>
<p><span class="math display">\[
\frac{\hat\pi_i}{1 - \hat\pi_i} = e^{-6.94} \times e^{2.50\bigg[\ln(\mathrm{ACT}_i)\bigg]}
\]</span></p>
<p>It is again easier to interpret the effects of ACT on the odds of obtaining a degree by creating a plot .</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the fitted equation</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> grad, <span class="fu">aes</span>(<span class="at">x =</span> act, <span class="at">y =</span> got_degree)) <span class="sc">+</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">6.94</span> <span class="sc">+</span> <span class="fl">2.50</span><span class="sc">*</span><span class="fu">log</span>(x))}</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ACT score"</span>) <span class="sc">+</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted odds of obtaining a degree"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-ln-fitted" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Predicted odds of obtaining a degree as a function of ACT score." data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ln-fitted-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04-03-more-logistic-regression_files/figure-html/fig-ln-fitted-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%" alt="Predicted odds of obtaining a degree as a function of ACT score.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ln-fitted-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;15.5: Predicted odds of obtaining a degree as a function of ACT score.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The effect of ACT on the probability of obtaining a degree is positive and non-linear (exponential growth). The predicted odds of obtaining a degree increases exponentially for higher ACT scores.</p>
<p>Finally, we could also transform the equation into the probability metric. The fitted equation is:</p>
<p><span class="math display">\[
\hat\pi_i = \frac{e^{-6.94 + 2.50\bigg[\ln(\mathrm{ACT}_i)\bigg]}}{1 + e^{-6.94 + 2.50\bigg[\ln(\mathrm{ACT}_i)\bigg]}}
\]</span></p>
<p>Again, it is worthwhile to create a plot to interpret the effects of ACT on the probability of obtaining a degree.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the fitted equation</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> grad, <span class="fu">aes</span>(<span class="at">x =</span> act, <span class="at">y =</span> got_degree)) <span class="sc">+</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">6.94</span> <span class="sc">+</span> <span class="fl">2.50</span><span class="sc">*</span><span class="fu">log</span>(x)) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">6.94</span> <span class="sc">+</span> <span class="fl">2.50</span><span class="sc">*</span><span class="fu">log</span>(x)))}</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ACT score"</span>) <span class="sc">+</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted probability of obtaining a degree"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-ln-fitted-prob" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Predicted probability of obtaining a degree as a function of ACT score." data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ln-fitted-prob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04-03-more-logistic-regression_files/figure-html/fig-ln-fitted-prob-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%" alt="Predicted probability of obtaining a degree as a function of ACT score.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ln-fitted-prob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;15.6: Predicted probability of obtaining a degree as a function of ACT score.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The effect of ACT on the probability of obtaining a degree is positive and non-linear. ACT has a larger effect on the probability of obtaining a degree for smaller ACT scores and this effect, while still positive, diminishes for higher ACT scores.</p>
<div class="fyi">
<p><strong>PROTIP</strong></p>
<p>Once you include non-linear effects in the model, always create a plot of the fitted equation to try and interpret odds or probabilities.</p>
</div>
<p><br></p>
</section>
</section>
<section id="adding-covariates-main-effects-models" class="level2" data-number="15.4">
<h2 data-number="15.4" class="anchored" data-anchor-id="adding-covariates-main-effects-models"><span class="header-section-number">15.4</span> Adding Covariates: Main Effects Models</h2>
<p>Now that we have settled on a functional form for the effect of ACT, we can include it as a covariate in a model with first generation status. Including covariates in the logistic model is done the same way as for <code>lm()</code> models. We fit that model with the following syntax:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit main effects model</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.3</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act), <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To evaluate this model, and to begin to provide an answer for our research question, we will examine the model evidence comparing this model to both the baseline model (intercept-only) and the model that included the main-effect of first generation status.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Model evidence</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">aictab</span>(</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">cand.set =</span> <span class="fu">list</span>(glm<span class="fl">.0</span>, glm<span class="fl">.2</span>, glm<span class="fl">.3</span>),</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">modnames =</span> <span class="fu">c</span>(<span class="st">"Intercept-Only"</span>, <span class="st">"First Gen."</span>, <span class="st">"First Gen. + ACT"</span>)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Model selection based on AICc:

                 K    AICc Delta_AICc AICcWt Cum.Wt       LL
First Gen. + ACT 3 2611.01       0.00      1      1 -1302.50
First Gen.       2 2666.09      55.09      0      1 -1331.04
Intercept-Only   1 2724.55     113.54      0      1 -1361.27</code></pre>
</div>
</div>
<p>Given the data and candidate models fitted, the empirical evidence overwhelmingly supports including both ACT scores and first generation status in the model. Adopting this model, we next look at the coefficients:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Coefficients</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(glm<span class="fl">.3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) is_firstgen    log(act) 
 -5.9129810   0.5089689   2.0719199 </code></pre>
</div>
</div>
<p>The fitted equation is:</p>
<p><span class="math display">\[
\ln \bigg( \frac{\hat\pi_i}{1 - \hat\pi_i}\bigg) = -5.91 + 0.51(\mathrm{First~Generation}_i) + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]
\]</span></p>
<p>Using the logit/log-odds metric, we interpret the coefficients as:</p>
<ul>
<li>Non-first generations students with an ACT score of 1 have a predicted log-odds of graduating of <span class="math inline">\(-5.91\)</span>.</li>
<li>Each 1% difference in ACT score is associated with a difference of 0.02 in the predicted log-odds of graduating, after controlling for first generation status.</li>
<li>First generation college students, have a predicted log-odds of graduating that is 0.51 higher than students who are not first generation students, after controlling for differences in ACT scores.</li>
</ul>
<p><br></p>
<section id="back-transforming-to-odds" class="level3" data-number="15.4.1">
<h3 data-number="15.4.1" class="anchored" data-anchor-id="back-transforming-to-odds"><span class="header-section-number">15.4.1</span> Back-Transforming to Odds</h3>
<p>If we back-transform the coefficients to facilitate interpretations using the odds metric, the fitted equation is:</p>
<p><span class="math display">\[
\begin{split}
\frac{\hat\pi_i}{1 - \hat\pi_i} &amp;= e^{-5.91 + 0.51(\mathrm{First~Generation}_i) + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]} \\[1ex]
&amp;=e^{-5.91} \times e^{0.51(\mathrm{First~Generation}_i)} \times e^{2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]}
\end{split}
\]</span></p>
<p>We can interpret the intercept and the effect of first generation status directly:</p>
<ul>
<li>Non-first generations students with an ACT score of 1 have a predicted odds of graduating of <span class="math inline">\(e^{-5.91}=.003\)</span>.</li>
<li>First generation college students, have a predicted odds of graduating that is <span class="math inline">\(e^{0.51}=1.66\)</span> times higher than that for non-first generations students, after controlling for differences in ACT scores.</li>
<li>Each one-point difference in ACT score is associated with improving the odds of graduating 1.09 times, on average, after controlling for whether or not the students are first generation college students.</li>
</ul>
<p>While it is not pertinent to the research question, if you wanted to interpret the effect of ACT, you could plot the fitted model. As always with main effects models, we find the fitted equation for first generation and non-first generation students, and plot the two curves separately using multiple <code>geom_function()</code> layers.</p>
<p><span class="math display">\[
\begin{split}
\mathbf{Non\mbox{-}First~Generation:}\quad\frac{\hat\pi_i}{1 - \hat\pi_i} &amp;= e^{-5.91 + 0.51(0) + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]} \\[1ex]
&amp;= e^{-5.91 + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]} \\[5ex]
\mathbf{First~Generation:}\quad\frac{\hat\pi_i}{1 - \hat\pi_i} &amp;= e^{-5.91 + 0.51(1) + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]} \\[1ex]
&amp;= e^{-5.40 + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]} \\[1ex]
\end{split}
\]</span></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the fitted equation</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> grad, <span class="fu">aes</span>(<span class="at">x =</span> act, <span class="at">y =</span> got_degree)) <span class="sc">+</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Non-first generation students</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">5.91</span> <span class="sc">+</span> <span class="fl">2.07</span><span class="sc">*</span><span class="fu">log</span>(x))},</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"dashed"</span>,</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"blue"</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># First generation students</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">5.40</span> <span class="sc">+</span> <span class="fl">2.07</span><span class="sc">*</span><span class="fu">log</span>(x))},</span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"solid"</span>,</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"red"</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">+</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ACT score"</span>) <span class="sc">+</span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted odds of obtaining a degree"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-main-effects-fitted" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Predicted odds of obtaining a degree as a function of ACT score first generation (solid, red line) and non-first generation (dashed, blue line) students." data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-main-effects-fitted-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04-03-more-logistic-regression_files/figure-html/fig-main-effects-fitted-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%" alt="Predicted odds of obtaining a degree as a function of ACT score first generation (solid, red line) and non-first generation (dashed, blue line) students.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-main-effects-fitted-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;15.7: Predicted odds of obtaining a degree as a function of ACT score first generation (solid, red line) and non-first generation (dashed, blue line) students.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Here we see that the odds of graduating increase exponentially at higher ACT scores for both first generation and non-first generation students, on average. This rate of increase, however, is higher for first generation students. Moreover, first generation students have higher odds of graduating than non-first generation students, regardless of ACT score.</p>
<p><br></p>
</section>
<section id="back-transforming-to-probability" class="level3" data-number="15.4.2">
<h3 data-number="15.4.2" class="anchored" data-anchor-id="back-transforming-to-probability"><span class="header-section-number">15.4.2</span> Back-Transforming to Probability</h3>
<p>Again, while not related to the research question, we can also plot the predicted probability of graduating as a function of ACT score. Algebraically manipulating the fitted equation,</p>
<p><span class="math display">\[
\hat\pi_i = \frac{e^{-5.91 + 0.51(\mathrm{First~Generation}_i) + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]}}{1 + e^{-5.91 + 0.51(\mathrm{First~Generation}_i) + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]}}
\]</span></p>
<p>We can then produce the fitted equations for non-first generation and first generation students by substituting either 0 or 1, respectively, into the <code>firstgen</code> variable. These equations are:</p>
<p><strong>Non-First Generation Students</strong></p>
<p><span class="math display">\[
\begin{split}
\hat\pi_i &amp;= \frac{e^{-5.91 + 0.51(0) + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]}}{1 + e^{-5.91 + 0.51(0) + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]}} \\[3ex]
&amp;= \frac{e^{-5.91 + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]}}{1 + e^{-5.91 + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]}}
\end{split}
\]</span></p>
<p><strong>First Generation Students</strong></p>
<p><span class="math display">\[
\begin{split}
\hat\pi_i &amp;= \frac{e^{-5.91 + 0.51(1) + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]}}{1 + e^{-5.91 + 0.51(1) + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]}} \\[1em]
&amp;= \frac{e^{-5.40 + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]}}{1 + e^{-5.40 + 2.07\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]}}
\end{split}
\]</span></p>
<p>We can include each of these in a <code>geom_function()</code> layer in our plot.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the fitted equations</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> grad, <span class="fu">aes</span>(<span class="at">x =</span> act, <span class="at">y =</span> got_degree)) <span class="sc">+</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Non-first generation students</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">5.91</span> <span class="sc">+</span> <span class="fl">2.07</span><span class="sc">*</span><span class="fu">log</span>(x)) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">5.91</span> <span class="sc">+</span> <span class="fl">2.07</span><span class="sc">*</span><span class="fu">log</span>(x)))},</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"dashed"</span>,</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"blue"</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># First generation students</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">5.40</span> <span class="sc">+</span> <span class="fl">2.07</span><span class="sc">*</span><span class="fu">log</span>(x)) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">5.40</span> <span class="sc">+</span> <span class="fl">2.07</span><span class="sc">*</span><span class="fu">log</span>(x)))},</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"solid"</span>,</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"red"</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ACT score"</span>) <span class="sc">+</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted probability of obtaining a degree"</span>) <span class="sc">+</span></span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-main-effects-fitted-prob" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Predicted probabilities of obtaining a degree as a function of ACT score first generation (solid, red line) and non-first generation (dashed, blue line) students." data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-main-effects-fitted-prob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04-03-more-logistic-regression_files/figure-html/fig-main-effects-fitted-prob-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%" alt="Predicted probabilities of obtaining a degree as a function of ACT score first generation (solid, red line) and non-first generation (dashed, blue line) students.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-main-effects-fitted-prob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;15.8: Predicted probabilities of obtaining a degree as a function of ACT score first generation (solid, red line) and non-first generation (dashed, blue line) students.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Here we see that the probability of graduatingobtaining a degree is positively associated with ACT score for both first generation and non-first generation students. The magnitude of the effect of ACT depends on ACT score for both groups. Although first generation students have higher probability of obtaining a degree than non-first generation students regardless of ACT score, the magnitude of this difference decreases at higher ACT scores.</p>
<p><br></p>
</section>
</section>
<section id="including-other-covariates-in-the-model" class="level2" data-number="15.5">
<h2 data-number="15.5" class="anchored" data-anchor-id="including-other-covariates-in-the-model"><span class="header-section-number">15.5</span> Including Other Covariates in the Model</h2>
<p>We will now fit a series of models that systematically include the remainder of the potential covariates based on their importance. We will have to adopt the correct functional form for ALL continuous variables by examining the plots of the data and residuals from potential transformations. (NOTE: This work is not shown here, but you should undertake it.)</p>
<p>The second covariate we will include is the number of AP courses taken. We use a log-transformation of this variable given its curvilinear status with the empirical log-odds of obtaining a degree. Because it has values of 0, we also add 1 before log-transforming.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Log-linear effect of AP courses</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.4</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act) <span class="sc">+</span> <span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>), <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we include scholarship amount into the model. An examination of the empirical log-odds of obtaining a degree versus scholarship amount also suggested a curvilinear relationship. We adopt a log-linear model, again adding 1 prior to transforming using the logarithm since there are 0s in the variable.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Effect of scholarship</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.5</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act) <span class="sc">+</span> <span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span>  <span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>), <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, we include the effect of non-traditional student status. Since it is a dummy-coded variable, we do not have to worry about the functional form. However, since we don’t know the functional form we need for scholarship amount, we will consider both when we include this covariate.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Effect of non-traditional student</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.6</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act) <span class="sc">+</span> <span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>              is_nontrad, <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we will use information criteria to select from these potential models.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aictab</span>(</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">cand.set =</span> <span class="fu">list</span>(glm<span class="fl">.2</span>, glm<span class="fl">.3</span>, glm<span class="fl">.4</span>, glm<span class="fl">.5</span>, glm<span class="fl">.6</span>),</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">modnames =</span> <span class="fu">c</span>(<span class="st">"FG"</span>, <span class="st">"FG + ACT"</span>, <span class="st">"FG + ACT + AP"</span>, <span class="st">"FG + ACT + AP + Sch"</span>,</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>               <span class="st">"FG + ACT + AP + Sch + NT"</span>)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Model selection based on AICc:

                         K    AICc Delta_AICc AICcWt Cum.Wt       LL
FG + ACT + AP + Sch + NT 6 2552.39       0.00    0.9    0.9 -1270.18
FG + ACT + AP + Sch      5 2556.80       4.41    0.1    1.0 -1273.39
FG + ACT + AP            4 2579.98      27.59    0.0    1.0 -1285.98
FG + ACT                 3 2611.01      58.62    0.0    1.0 -1302.50
FG                       2 2666.09     113.70    0.0    1.0 -1331.04</code></pre>
</div>
</div>
<p>Here the empirical evidence supports the model that includes all the covariates. Examining the binned residuals (not shown), the model does not seem adequate. Next we turn to evaluating potential interaction terms to see if that improves the residual fit.</p>
<p><br></p>
</section>
<section id="interaction-between-act-score-and-first-generation-status" class="level2" data-number="15.6">
<h2 data-number="15.6" class="anchored" data-anchor-id="interaction-between-act-score-and-first-generation-status"><span class="header-section-number">15.6</span> Interaction Between ACT Score and First Generation Status</h2>
<p>Since this is an exploratory analysis, we should only fit first-order interactions, and only with the focal predictor (i.e., first generation status). We will adopt the same modeling strategy as before, building up interaction terms in the order of covariate importance.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Interaction models</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.7</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act) <span class="sc">+</span> <span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>              is_nontrad <span class="sc">+</span> is_firstgen<span class="sc">:</span><span class="fu">log</span>(act), <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.8</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act) <span class="sc">+</span> <span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>              is_nontrad <span class="sc">+</span> is_firstgen<span class="sc">:</span><span class="fu">log</span>(act) <span class="sc">+</span> is_firstgen<span class="sc">:</span><span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>),</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.9</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act) <span class="sc">+</span> <span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>              is_nontrad <span class="sc">+</span> is_firstgen<span class="sc">:</span><span class="fu">log</span>(act) <span class="sc">+</span> is_firstgen<span class="sc">:</span><span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>              is_firstgen<span class="sc">:</span><span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>),</span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.10</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act) <span class="sc">+</span> <span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a>              is_nontrad <span class="sc">+</span> is_firstgen<span class="sc">:</span><span class="fu">log</span>(act) <span class="sc">+</span> is_firstgen<span class="sc">:</span><span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a>              is_firstgen<span class="sc">:</span><span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span> is_firstgen<span class="sc">:</span>is_nontrad,</span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate</span></span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a><span class="fu">aictab</span>(</span>
<span id="cb56-22"><a href="#cb56-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">cand.set =</span> <span class="fu">list</span>(glm<span class="fl">.6</span>, glm<span class="fl">.7</span>, glm<span class="fl">.8</span>, glm<span class="fl">.9</span>, glm<span class="fl">.10</span>),</span>
<span id="cb56-23"><a href="#cb56-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">modnames =</span> <span class="fu">c</span>(<span class="st">"Main Effects"</span>, <span class="st">"FG:ACT"</span>, <span class="st">"FG:ACT + FG:AP"</span>, <span class="st">"FG:ACT + FG:APP + FG:Sch"</span>,</span>
<span id="cb56-24"><a href="#cb56-24" aria-hidden="true" tabindex="-1"></a>               <span class="st">"FG:ACT + FG:APP + FG:Sch + FG:NT"</span>)</span>
<span id="cb56-25"><a href="#cb56-25" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Model selection based on AICc:

                                  K    AICc Delta_AICc AICcWt Cum.Wt       LL
FG:ACT                            7 2550.72       0.00   0.44   0.44 -1268.34
FG:ACT + FG:AP                    8 2552.24       1.52   0.20   0.64 -1268.09
Main Effects                      6 2552.39       1.67   0.19   0.83 -1270.18
FG:ACT + FG:APP + FG:Sch          9 2553.65       2.94   0.10   0.93 -1267.79
FG:ACT + FG:APP + FG:Sch + FG:NT 10 2554.53       3.82   0.07   1.00 -1267.22</code></pre>
</div>
</div>
<p>While the model that includes the interaction between first generation status and ACT has the most empirical evidence (given the data and candidate models), there is some degree of empirical evidence for almost all of the interaction models fitted. Evaluating the binned residuals (not shown) there is a reasonable (and roughly equal) degree of residual fit for <code>glm.7</code>, <code>glm.8</code>, and <code>glm.10</code>. Given this, the information from the AICc table, and the rule of parsimony, we will adopt <code>glm.7</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Coefficients</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(glm<span class="fl">.7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         (Intercept)          is_firstgen             log(act) 
          -1.2481921           -3.0403893            0.5369378 
 log(ap_courses + 1) log(scholarship + 1)           is_nontrad 
           0.2798161            1.1082252           -0.8317753 
is_firstgen:log(act) 
           1.1033996 </code></pre>
</div>
</div>
<p><span class="math display">\[
\begin{split}
\ln\bigg[\frac{\hat\pi_i}{1 - \hat\pi_i}\bigg] = &amp;-1.25 - 3.04(\mathrm{First~Gen}_i) + 0.54\bigg[\ln(\mathrm{ACT~Score}_i)\bigg] + 0.28\bigg[\ln(\mathrm{AP~Courses}_i + 1)\bigg] +\\
&amp; 1.11\bigg[\ln(\mathrm{Scholarship}_i + 1)\bigg] - 0.83(\mathrm{Non\mbox{-}Traditional}_i) + 1.10\bigg[\ln(\mathrm{ACT~Score}_i\bigg](\mathrm{First~Gen}_i)
\end{split}
\]</span></p>
<p><br></p>
</section>
<section id="interpreting-the-results-from-the-adopted-model" class="level2" data-number="15.7">
<h2 data-number="15.7" class="anchored" data-anchor-id="interpreting-the-results-from-the-adopted-model"><span class="header-section-number">15.7</span> Interpreting the Results from the Adopted Model</h2>
<p>To interpret these results, we will plot results freom the fitted model. In thinking about what needs to be displayed:</p>
<ul>
<li>The effect of first-generation student wil be displayed as separate lines since it is the focal predictor.</li>
<li>The effect of ACT will be displayed since it is part of an interaction with the focal predictor.</li>
<li>The effect of AP Courses will be controlled out by setting to its mean value.</li>
<li>The effect of Scholarship will be controlled out by setting to its mean value.</li>
<li>The effect of Non-traditional will be controlled by setting the value to the reference level (e.g., traditional student).<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></li>
</ul>
<p>We next use the fitted equation to find the equations for the first and non-first generation students.</p>
<p><strong>Non-First Generation Students</strong></p>
<p><span class="math display">\[
\begin{split}
\ln\bigg[\frac{\hat\pi_i}{1 - \hat\pi_i}\bigg] = &amp;-1.25 - 3.04(0) + 0.54\bigg[\ln(\mathrm{ACT~Score}_i)\bigg] + 0.28\bigg[\ln(3.28 + 1)\bigg] +\\
&amp; 1.11\bigg[\ln(0.18 + 1)\bigg] - 0.83(0) + 1.10\bigg[\ln(\mathrm{ACT~Score}_i\bigg](0) \\[3ex]
= &amp; -0.66 + 0.54\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]
\end{split}
\]</span></p>
<p><strong>First Generation Students</strong></p>
<p><span class="math display">\[
\begin{split}
\ln\bigg[\frac{\hat\pi_i}{1 - \hat\pi_i}\bigg] = &amp;-1.25 - 3.04(1) + 0.54\bigg[\ln(\mathrm{ACT~Score}_i)\bigg] + 0.28\bigg[\ln(3.28 + 1)\bigg] +\\
&amp; 1.11\bigg[\ln(0.18 + 1)\bigg] - 0.83(0) + 1.10\bigg[\ln(\mathrm{ACT~Score}_i\bigg](1) \\[3ex]
= &amp; -3.70 + 1.64\bigg[\ln(\mathrm{ACT~Score}_i)\bigg]
\end{split}
\]</span></p>
<p>We will plot these two equations using the probability metric.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the fitted equations</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> grad, <span class="fu">aes</span>(<span class="at">x =</span> act, <span class="at">y =</span> got_degree)) <span class="sc">+</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Non-first generation students</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">0.66</span> <span class="sc">+</span> <span class="fl">0.54</span><span class="sc">*</span><span class="fu">log</span>(x)) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">0.66</span> <span class="sc">+</span> <span class="fl">0.5</span><span class="sc">*</span><span class="fu">log</span>(x)))},</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"dashed"</span>,</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"blue"</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># First generation students</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">3.70</span> <span class="sc">+</span> <span class="fl">1.64</span><span class="sc">*</span><span class="fu">log</span>(x)) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">3.70</span> <span class="sc">+</span> <span class="fl">1.647</span><span class="sc">*</span><span class="fu">log</span>(x)))},</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"solid"</span>,</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"red"</span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ACT score"</span>) <span class="sc">+</span></span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted probability of obtaining a degree"</span>) <span class="sc">+</span></span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-interaction-fitted-prob" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Predicted probability of obtaining a degree as a function of ACT score for first generation (solid, red line) and non-first generation (dashed, blue line) who ar 18 years old at the time of enrollment. The effects for the number of AP credits and scholarship amount (in thousands of dollars) were controlled by setting them to their mean values of 3.28 and 0.18, respectively." data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-interaction-fitted-prob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04-03-more-logistic-regression_files/figure-html/fig-interaction-fitted-prob-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%" alt="Predicted probability of obtaining a degree as a function of ACT score for first generation (solid, red line) and non-first generation (dashed, blue line) who ar 18 years old at the time of enrollment. The effects for the number of AP credits and scholarship amount (in thousands of dollars) were controlled by setting them to their mean values of 3.28 and 0.18, respectively.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-interaction-fitted-prob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;15.9: Predicted probability of obtaining a degree as a function of ACT score for first generation (solid, red line) and non-first generation (dashed, blue line) who ar 18 years old at the time of enrollment. The effects for the number of AP credits and scholarship amount (in thousands of dollars) were controlled by setting them to their mean values of 3.28 and 0.18, respectively.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Because our research question is about the effect of first generation status, we will focus the interpretation from this plot on that effect.</p>
<p>Here we see that first generation status and ACT score interact on the probability of obtaining a degree. For students with lower ACT scores the probability of obtaining a degree is smaller for first generation students than for non-first generation students. However, this difference diminishes for students with higher ACT scores.</p>
<p><br></p>
</section>
<section id="presenting-a-table-of-logistic-regression-results" class="level2" data-number="15.8">
<h2 data-number="15.8" class="anchored" data-anchor-id="presenting-a-table-of-logistic-regression-results"><span class="header-section-number">15.8</span> Presenting a Table of Logistic Regression Results</h2>
<p>We can present selected fitted models from the analysis in a table similar to those we have created for OLS models. In this analysis I would present <code>glm.0</code>, <code>glm.2</code>, <code>glm.3</code>, <code>glm.6</code>, and <code>glm.7</code>. <em>Note that we do not have to present ALL the models we fitted in the table, only those that tell a coherent story about the analysis.</em> (If you are worried about transparency, you can always link to our script file or RMD document which includes all the models fitted in the paper, or include some prose that indicates there were other models fitted.) For these models, we want to report:</p>
<ul>
<li>Coefficients and SEs</li>
<li>Residual Deviance</li>
<li>AICc values (This can be computed from the <em>df</em> and residual deviances, but since it was our main criterion for model selection, it is a good idea to report it!)</li>
<li>Pseudo-<span class="math inline">\(R^2\)</span> values</li>
</ul>
<p>Here is a table I might present for this analysis.</p>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the table</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">htmlreg</span>(</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">l =</span> <span class="fu">list</span>(glm<span class="fl">.0</span>, glm<span class="fl">.2</span>, glm<span class="fl">.3</span>, glm<span class="fl">.6</span>, glm<span class="fl">.7</span>),</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="fu">numeric</span>(<span class="dv">0</span>),    <span class="co">#No p-value stars</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">digits =</span> <span class="dv">2</span>,</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">padding =</span> <span class="dv">20</span>,          <span class="co">#Add space around columns (you may need to adjust this via trial-and-error)</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">custom.model.names =</span> <span class="fu">c</span>(<span class="st">"Model A"</span>, <span class="st">"Model B"</span>, <span class="st">"Model C"</span>, <span class="st">"Model D"</span>, <span class="st">"Model E"</span>),</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">custom.coef.names =</span> <span class="fu">c</span>(<span class="st">"Intercept"</span>, <span class="st">"First Generation"</span>, <span class="st">"ln(ACT Score)"</span>,</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"ln(AP Courses + 1)"</span>, <span class="st">"ln(Scholarship Amount + 1)"</span>, <span class="st">"Non-Traditional Student"</span>,</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"First Generation x ln(ACT Score)"</span>),</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">reorder.coef =</span> <span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>, <span class="dv">1</span>), <span class="co">#Put intercept at bottom of table</span></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">include.aic =</span> <span class="cn">FALSE</span>, <span class="co">#Omit AIC</span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">include.bic =</span> <span class="cn">FALSE</span>, <span class="co">#Omit BIC</span></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">include.nobs =</span> <span class="cn">FALSE</span>,  <span class="co">#Omit sample size</span></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">include.loglik =</span> <span class="cn">FALSE</span>,   <span class="co">#Omit log-likelihood</span></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">custom.gof.rows =</span> <span class="fu">list</span>(</span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">AICc =</span> <span class="fu">c</span>(<span class="fu">AICc</span>(glm<span class="fl">.0</span>), <span class="fu">AICc</span>(glm<span class="fl">.2</span>), <span class="fu">AICc</span>(glm<span class="fl">.3</span>), <span class="fu">AICc</span>(glm<span class="fl">.6</span>), <span class="fu">AICc</span>(glm<span class="fl">.7</span>)),</span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">R2 =</span> (<span class="fl">2722.5</span> <span class="sc">-</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="fl">2662.09</span>, <span class="fl">2605.00</span>, <span class="fl">2540.35</span>, <span class="fl">2536.67</span>)) <span class="sc">/</span>  <span class="fl">2722.5</span></span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a>    ), <span class="co"># Add AICc values</span></span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">reorder.gof =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="cn">NULL</span>,</span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption.above =</span> <span class="cn">TRUE</span>, <span class="co">#Move caption above table</span></span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">inner.rules =</span> <span class="dv">1</span>, <span class="co">#Include line rule before model-level output</span></span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">outer.rules =</span> <span class="dv">1</span> , <span class="co">#Include line rules around table</span></span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">custom.note =</span> <span class="st">"The $R^2$ value is based on the proportion of reduced deviance from the intercept-only model (Model A)"</span></span>
<span id="cb61-26"><a href="#cb61-26" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-model-results" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-layout-align="center">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-model-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;15.2: Five candidate models predicting variation in the log-odds of obtaining a degree. The first generation and non-traditional student predictors were dummy-coded.
</figcaption>
<div aria-describedby="tbl-model-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="texreg" style="margin: 10px auto;border-collapse: collapse;border-spacing: 0px;color: #000000;border-top: 1px solid #000000;">
<thead>
<tr>
<th style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</th>
<th style="padding-left: 20px;padding-right: 20px;">
Model A
</th>
<th style="padding-left: 20px;padding-right: 20px;">
Model B
</th>
<th style="padding-left: 20px;padding-right: 20px;">
Model C
</th>
<th style="padding-left: 20px;padding-right: 20px;">
Model D
</th>
<th style="padding-left: 20px;padding-right: 20px;">
Model E
</th>
</tr>
</thead>
<tbody>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 20px;padding-right: 20px;">
First Generation
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
0.77
</td>
<td style="padding-left: 20px;padding-right: 20px;">
0.51
</td>
<td style="padding-left: 20px;padding-right: 20px;">
0.42
</td>
<td style="padding-left: 20px;padding-right: 20px;">
-3.04
</td>
</tr>
<tr>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.10)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.10)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.11)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(1.80)
</td>
</tr>
<tr>
<td style="padding-left: 20px;padding-right: 20px;">
ln(ACT Score)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
2.07
</td>
<td style="padding-left: 20px;padding-right: 20px;">
1.11
</td>
<td style="padding-left: 20px;padding-right: 20px;">
0.54
</td>
</tr>
<tr>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.28)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.30)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.42)
</td>
</tr>
<tr>
<td style="padding-left: 20px;padding-right: 20px;">
ln(AP Courses + 1)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
0.29
</td>
<td style="padding-left: 20px;padding-right: 20px;">
0.28
</td>
</tr>
<tr>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.06)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.06)
</td>
</tr>
<tr>
<td style="padding-left: 20px;padding-right: 20px;">
ln(Scholarship Amount + 1)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
1.16
</td>
<td style="padding-left: 20px;padding-right: 20px;">
1.11
</td>
</tr>
<tr>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.26)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.26)
</td>
</tr>
<tr>
<td style="padding-left: 20px;padding-right: 20px;">
Non-Traditional Student
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
-0.84
</td>
<td style="padding-left: 20px;padding-right: 20px;">
-0.83
</td>
</tr>
<tr>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.33)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.33)
</td>
</tr>
<tr>
<td style="padding-left: 20px;padding-right: 20px;">
First Generation x ln(ACT Score)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
1.10
</td>
</tr>
<tr>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.57)
</td>
</tr>
<tr>
<td style="padding-left: 20px;padding-right: 20px;">
Intercept
</td>
<td style="padding-left: 20px;padding-right: 20px;">
1.01
</td>
<td style="padding-left: 20px;padding-right: 20px;">
0.50
</td>
<td style="padding-left: 20px;padding-right: 20px;">
-5.91
</td>
<td style="padding-left: 20px;padding-right: 20px;">
-3.03
</td>
<td style="padding-left: 20px;padding-right: 20px;">
-1.25
</td>
</tr>
<tr>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.05)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.08)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.86)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(0.94)
</td>
<td style="padding-left: 20px;padding-right: 20px;">
(1.31)
</td>
</tr>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 20px;padding-right: 20px;">
Deviance
</td>
<td style="padding-left: 20px;padding-right: 20px;">
2722.55
</td>
<td style="padding-left: 20px;padding-right: 20px;">
2662.09
</td>
<td style="padding-left: 20px;padding-right: 20px;">
2605.00
</td>
<td style="padding-left: 20px;padding-right: 20px;">
2540.35
</td>
<td style="padding-left: 20px;padding-right: 20px;">
2536.67
</td>
</tr>
<tr>
<td style="padding-left: 20px;padding-right: 20px;">
AICc
</td>
<td style="padding-left: 20px;padding-right: 20px;">
2724.55
</td>
<td style="padding-left: 20px;padding-right: 20px;">
2666.09
</td>
<td style="padding-left: 20px;padding-right: 20px;">
2611.01
</td>
<td style="padding-left: 20px;padding-right: 20px;">
2552.39
</td>
<td style="padding-left: 20px;padding-right: 20px;">
2550.72
</td>
</tr>
<tr style="border-bottom: 1px solid #000000;">
<td style="padding-left: 20px;padding-right: 20px;">
R2
</td>
<td style="padding-left: 20px;padding-right: 20px;">
&nbsp;
</td>
<td style="padding-left: 20px;padding-right: 20px;">
0.02
</td>
<td style="padding-left: 20px;padding-right: 20px;">
0.04
</td>
<td style="padding-left: 20px;padding-right: 20px;">
0.07
</td>
<td style="padding-left: 20px;padding-right: 20px;">
0.07
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="font-size: 0.8em;" colspan="6">
The <span class="math inline">\(R^2\)</span> value is based on the proportion of reduced deviance from the intercept-only model (Model A)
</td>
</tr>
</tfoot>
</table>
</div>
</figure>
</div>
<div class="fyi">
<p><strong>FYI</strong></p>
<p>Pseudo-<span class="math inline">\(R^2\)</span> values are commonly reported in applied research. Because there are many potential pseudo-<span class="math inline">\(R^2\)</span> values, you should always indicate the method used to calculate this metric.</p>
</div>


<!-- -->

</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>Another analyst might choose to use the non-traditional group or to show the effect by displaying both groups, perhaps in different panels.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./04-02-logistic-regression.html" class="pagination-link" aria-label="Logistic Regression">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Logistic Regression</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./05-00-modeling-nonindependence.html" class="pagination-link" aria-label="Modeling Nonindependence">
        <span class="nav-page-text">Modeling Nonindependence</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb62" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># More Logistic Regression</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"scripts/_common.R"</span>)</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="fu">## Preparation</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>In this chapter, you will expand your knowledge of the logistic regression model to include categorical predictors, non-linear predictor effects, covariates, and interaction terms. We will again use data from the file *graduation.csv* to explore predictors of college graduation. </span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">CSV File</span><span class="co">](https://raw.githubusercontent.com/zief0002/fluffy-ants/main/data/graduation.csv)</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Data Codebook</span><span class="co">](http://zief0002.github.io/fluffy-ants/codebooks/graduation.html)</span></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a>Within the analysis, we will focus on the research question of whether the probability of obtaining a degree differs for first and non-first generation students. We will use information criteria as the framework of evidence to adopt different models, along with an evaluation of the models' residuals.</span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-24"><a href="#cb62-24" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-25"><a href="#cb62-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb62-26"><a href="#cb62-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(AICcmodavg)</span>
<span id="cb62-27"><a href="#cb62-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb62-28"><a href="#cb62-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrr)</span>
<span id="cb62-29"><a href="#cb62-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb62-30"><a href="#cb62-30" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(performance)</span>
<span id="cb62-31"><a href="#cb62-31" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(texreg)</span>
<span id="cb62-32"><a href="#cb62-32" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb62-33"><a href="#cb62-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-34"><a href="#cb62-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in data and create dummy variable for categorical variables</span></span>
<span id="cb62-35"><a href="#cb62-35" aria-hidden="true" tabindex="-1"></a>grad <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://raw.githubusercontent.com/zief0002/fluffy-ants/main/data/graduation.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-36"><a href="#cb62-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-37"><a href="#cb62-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">got_degree =</span> <span class="fu">if_else</span>(degree <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb62-38"><a href="#cb62-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_firstgen =</span> <span class="fu">if_else</span>(first_gen <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb62-39"><a href="#cb62-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_nontrad =</span> <span class="fu">if_else</span>(non_traditional <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb62-40"><a href="#cb62-40" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-41"><a href="#cb62-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-42"><a href="#cb62-42" aria-hidden="true" tabindex="-1"></a><span class="co"># View data</span></span>
<span id="cb62-43"><a href="#cb62-43" aria-hidden="true" tabindex="-1"></a>grad</span>
<span id="cb62-44"><a href="#cb62-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-45"><a href="#cb62-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit models from previous notes</span></span>
<span id="cb62-46"><a href="#cb62-46" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.0</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb62-47"><a href="#cb62-47" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.1</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> act, <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb62-48"><a href="#cb62-48" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-49"><a href="#cb62-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-50"><a href="#cb62-50" aria-hidden="true" tabindex="-1"></a>&lt;br /&gt;</span>
<span id="cb62-51"><a href="#cb62-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-52"><a href="#cb62-52" aria-hidden="true" tabindex="-1"></a><span class="fu">## Categorical Predictors</span></span>
<span id="cb62-53"><a href="#cb62-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-54"><a href="#cb62-54" aria-hidden="true" tabindex="-1"></a>We will next turn to evaluating whether first generation students have a different predicted probability of obtaining a degree than non-first generation students. As always, we start with computing summary statistics and plots. Because both the predictor and outcome are categorical, we will again focus on counts and proportions.</span>
<span id="cb62-55"><a href="#cb62-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-58"><a href="#cb62-58" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-59"><a href="#cb62-59" aria-hidden="true" tabindex="-1"></a><span class="co"># Counts of students by degree and first gen status</span></span>
<span id="cb62-60"><a href="#cb62-60" aria-hidden="true" tabindex="-1"></a>grad <span class="sc">|&gt;</span></span>
<span id="cb62-61"><a href="#cb62-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(degree, first_gen) <span class="sc">|&gt;</span></span>
<span id="cb62-62"><a href="#cb62-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb62-63"><a href="#cb62-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> <span class="fu">n</span>()</span>
<span id="cb62-64"><a href="#cb62-64" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-65"><a href="#cb62-65" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-66"><a href="#cb62-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-67"><a href="#cb62-67" aria-hidden="true" tabindex="-1"></a>&lt;br /&gt;</span>
<span id="cb62-68"><a href="#cb62-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-69"><a href="#cb62-69" aria-hidden="true" tabindex="-1"></a><span class="fu">### Contingency Tables</span></span>
<span id="cb62-70"><a href="#cb62-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-71"><a href="#cb62-71" aria-hidden="true" tabindex="-1"></a>The primary method of displaying summary information when both the predictor and outcome are categorical is via a **contingency table**. In our two-way table, we will display counts from the four different combinations of first generation and degree obtainment status. Since each of those variables includes two levels (degree/no degree and first gen/non-first gen), this is referred to as a 2x2 table; each number refers to the number of levels in one of the variables being displayed.</span>
<span id="cb62-72"><a href="#cb62-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-75"><a href="#cb62-75" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-76"><a href="#cb62-76" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-first-gen</span></span>
<span id="cb62-77"><a href="#cb62-77" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "2x2 table of counts for degree obtainment by first generation status."</span></span>
<span id="cb62-78"><a href="#cb62-78" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb62-79"><a href="#cb62-79" aria-hidden="true" tabindex="-1"></a>tab_01 <span class="ot">=</span> <span class="fu">data.frame</span>(</span>
<span id="cb62-80"><a href="#cb62-80" aria-hidden="true" tabindex="-1"></a>  <span class="at">first_gen =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>, <span class="st">"Total"</span>),</span>
<span id="cb62-81"><a href="#cb62-81" aria-hidden="true" tabindex="-1"></a>  <span class="at">no =</span> <span class="fu">c</span>(<span class="dv">267</span>, <span class="dv">360</span>, <span class="dv">627</span>),</span>
<span id="cb62-82"><a href="#cb62-82" aria-hidden="true" tabindex="-1"></a>  <span class="at">yes =</span> <span class="fu">c</span>(<span class="dv">440</span>, <span class="dv">1277</span>, <span class="dv">1717</span>),</span>
<span id="cb62-83"><a href="#cb62-83" aria-hidden="true" tabindex="-1"></a>  <span class="at">total =</span> <span class="fu">c</span>(<span class="dv">707</span>, <span class="dv">1637</span>, <span class="dv">2344</span>)</span>
<span id="cb62-84"><a href="#cb62-84" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb62-85"><a href="#cb62-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-86"><a href="#cb62-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Create table</span></span>
<span id="cb62-87"><a href="#cb62-87" aria-hidden="true" tabindex="-1"></a>tab_01 <span class="sc">|&gt;</span></span>
<span id="cb62-88"><a href="#cb62-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb62-89"><a href="#cb62-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb62-90"><a href="#cb62-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">first_gen =</span> <span class="fu">md</span>(<span class="st">"*First Generation Status*"</span>),</span>
<span id="cb62-91"><a href="#cb62-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">no =</span> <span class="fu">md</span>(<span class="st">"No"</span>),</span>
<span id="cb62-92"><a href="#cb62-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">yes =</span> <span class="fu">md</span>(<span class="st">"Yes"</span>),</span>
<span id="cb62-93"><a href="#cb62-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">total =</span> <span class="fu">md</span>(<span class="st">"Total"</span>)</span>
<span id="cb62-94"><a href="#cb62-94" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb62-95"><a href="#cb62-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(</span>
<span id="cb62-96"><a href="#cb62-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(first_gen),</span>
<span id="cb62-97"><a href="#cb62-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">"left"</span></span>
<span id="cb62-98"><a href="#cb62-98" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb62-99"><a href="#cb62-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(</span>
<span id="cb62-100"><a href="#cb62-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(no, yes, total),</span>
<span id="cb62-101"><a href="#cb62-101" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">"center"</span></span>
<span id="cb62-102"><a href="#cb62-102" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb62-103"><a href="#cb62-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb62-104"><a href="#cb62-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">md</span>(<span class="st">"*Obtained Degree*"</span>),</span>
<span id="cb62-105"><a href="#cb62-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(no, yes)</span>
<span id="cb62-106"><a href="#cb62-106" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb62-107"><a href="#cb62-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb62-108"><a href="#cb62-108" aria-hidden="true" tabindex="-1"></a>        <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">align =</span> <span class="st">"left"</span>, <span class="at">indent =</span> <span class="fu">px</span>(<span class="dv">20</span>)),</span>
<span id="cb62-109"><a href="#cb62-109" aria-hidden="true" tabindex="-1"></a>        <span class="at">locations =</span> <span class="fu">cells_body</span>(</span>
<span id="cb62-110"><a href="#cb62-110" aria-hidden="true" tabindex="-1"></a>          <span class="at">columns =</span> first_gen,</span>
<span id="cb62-111"><a href="#cb62-111" aria-hidden="true" tabindex="-1"></a>          <span class="at">rows =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb62-112"><a href="#cb62-112" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb62-113"><a href="#cb62-113" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb62-114"><a href="#cb62-114" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-115"><a href="#cb62-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-116"><a href="#cb62-116" aria-hidden="true" tabindex="-1"></a>There are three types of counts (sample sizes) that are typically included in contingency tables:</span>
<span id="cb62-117"><a href="#cb62-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-118"><a href="#cb62-118" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Cell Counts:** The "cells" in the two-way table include counts for the four combinations of first generation and degree obtainment status. The counts in those four cells are referred to as *cell counts* or cell sample sizes. These are generally notated symbolically as $n_{i,j}$ where *i* indicates the row and *j* indicates the column. For example, $n_{1,2}=440$ indicates the number of non-first generation students who obtained a degree.</span>
<span id="cb62-119"><a href="#cb62-119" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Marginal Counts:** The counts in the "Total" row and column are called the *marginal counts*, or marginal sample sizes. They indicate the total counts collapsing across either rows or columns. These are generally notated symbolically as $n_{\bullet,j}$ or $n_{i, \bullet}$ where the dot indicates that we are collapsing across either rows or columns. For example, $n_{2,\bullet}=1637$ indicates the number of first generation students.</span>
<span id="cb62-120"><a href="#cb62-120" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Grand Count:** Finally, there is the cell that includes the grand total sample size. This is usually just denoted as *N* (or sometimes $n_{\bullet,\bullet}$). In our example, $n=2344$, the total number of students in the sample.</span>
<span id="cb62-121"><a href="#cb62-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-122"><a href="#cb62-122" aria-hidden="true" tabindex="-1"></a>The three different totals (row total, column total, grand total) means that we can compute three different proportions for each of the four cells. Each proportion has a different interpretation depending on which total is used in the denominator. For example, consider the cell that designates first generation students who obtained a degree ($n_{2,2}=1227$).</span>
<span id="cb62-123"><a href="#cb62-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-124"><a href="#cb62-124" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The grand total of 2344 indicates all student, so computing the proportion using that denominator, $1227/2344 = 0.523$, indicates that 0.523 of all students are first generation who obtained a degree.</span>
<span id="cb62-125"><a href="#cb62-125" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The row total of 1637 indicates the number of students who are first generation students, so computing the proportion using that denominator, $1227/1637 = 0.750$, indicates that 0.750 of all first generation students obtained a degree.</span>
<span id="cb62-126"><a href="#cb62-126" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The column total of 1717 indicates the number of students who obtained a degree, so computing the proportion using that denominator, $1227/1717 = 0.715$, indicates that 0.715 of students who obtained a degree are first generation students.</span>
<span id="cb62-127"><a href="#cb62-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-128"><a href="#cb62-128" aria-hidden="true" tabindex="-1"></a>&lt;br /&gt;</span>
<span id="cb62-129"><a href="#cb62-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-130"><a href="#cb62-130" aria-hidden="true" tabindex="-1"></a><span class="fu">### Computing Proportions: Order in `group_by()` Matters</span></span>
<span id="cb62-131"><a href="#cb62-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-132"><a href="#cb62-132" aria-hidden="true" tabindex="-1"></a>We can compute proportions using the row and column totals in the denominator by using the same set of dplyr operations we used previously, namely grouping by the predictor and outcome, summarizing to compute the sample size, and then mutating to find the proportion. The key is the order in which we include the variables in <span class="in">`group_by()`</span>.</span>
<span id="cb62-133"><a href="#cb62-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-134"><a href="#cb62-134" aria-hidden="true" tabindex="-1"></a>If we want to use the row totals (the number of first generation and non-first generation students) in the denominator, we need to include <span class="in">`first_gen`</span> in the <span class="in">`group_by()`</span> prior to <span class="in">`degree`</span>. The computation of <span class="in">`sum()`</span> in <span class="in">`mutate()`</span> will continue to be based on the first generation grouping (<span class="in">`group_by()`</span> is in effect until we explicitly use <span class="in">`ungroup()`</span>).</span>
<span id="cb62-135"><a href="#cb62-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-138"><a href="#cb62-138" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-139"><a href="#cb62-139" aria-hidden="true" tabindex="-1"></a><span class="co"># Use first generations status totals in proportion</span></span>
<span id="cb62-140"><a href="#cb62-140" aria-hidden="true" tabindex="-1"></a>grad <span class="sc">|&gt;</span></span>
<span id="cb62-141"><a href="#cb62-141" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(first_gen, degree) <span class="sc">|&gt;</span></span>
<span id="cb62-142"><a href="#cb62-142" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb62-143"><a href="#cb62-143" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-144"><a href="#cb62-144" aria-hidden="true" tabindex="-1"></a>    <span class="at">Prop =</span> N <span class="sc">/</span> <span class="fu">sum</span> (N)</span>
<span id="cb62-145"><a href="#cb62-145" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb62-146"><a href="#cb62-146" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-147"><a href="#cb62-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-148"><a href="#cb62-148" aria-hidden="true" tabindex="-1"></a>To compute proportions based on the number of students who obtained a degree and the number who did not obtain a degree, we need to include <span class="in">`degree`</span> in the <span class="in">`group_by()`</span> function prior to <span class="in">`first_gen`</span>.</span>
<span id="cb62-149"><a href="#cb62-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-150"><a href="#cb62-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-153"><a href="#cb62-153" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-154"><a href="#cb62-154" aria-hidden="true" tabindex="-1"></a><span class="co"># Use degree status totals in proportion</span></span>
<span id="cb62-155"><a href="#cb62-155" aria-hidden="true" tabindex="-1"></a>grad <span class="sc">|&gt;</span></span>
<span id="cb62-156"><a href="#cb62-156" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(degree, first_gen) <span class="sc">|&gt;</span></span>
<span id="cb62-157"><a href="#cb62-157" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb62-158"><a href="#cb62-158" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-159"><a href="#cb62-159" aria-hidden="true" tabindex="-1"></a>    <span class="at">Prop =</span> N <span class="sc">/</span> <span class="fu">sum</span> (N)</span>
<span id="cb62-160"><a href="#cb62-160" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb62-161"><a href="#cb62-161" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-162"><a href="#cb62-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-163"><a href="#cb62-163" aria-hidden="true" tabindex="-1"></a>If you want to base the proportions on the grand total, the order in <span class="in">`group_by()`</span> doesn't matter, but you need to explicitly <span class="in">`ungroup()`</span> prior to computing the proportions.</span>
<span id="cb62-164"><a href="#cb62-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-167"><a href="#cb62-167" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-168"><a href="#cb62-168" aria-hidden="true" tabindex="-1"></a><span class="co"># Use grand total in proportion</span></span>
<span id="cb62-169"><a href="#cb62-169" aria-hidden="true" tabindex="-1"></a>grad <span class="sc">|&gt;</span></span>
<span id="cb62-170"><a href="#cb62-170" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(degree, first_gen) <span class="sc">|&gt;</span></span>
<span id="cb62-171"><a href="#cb62-171" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb62-172"><a href="#cb62-172" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb62-173"><a href="#cb62-173" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-174"><a href="#cb62-174" aria-hidden="true" tabindex="-1"></a>    <span class="at">Prop =</span> N <span class="sc">/</span> <span class="fu">sum</span> (N)</span>
<span id="cb62-175"><a href="#cb62-175" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb62-176"><a href="#cb62-176" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-177"><a href="#cb62-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-178"><a href="#cb62-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-179"><a href="#cb62-179" aria-hidden="true" tabindex="-1"></a>:::fyi</span>
<span id="cb62-180"><a href="#cb62-180" aria-hidden="true" tabindex="-1"></a>**FYI**</span>
<span id="cb62-181"><a href="#cb62-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-182"><a href="#cb62-182" aria-hidden="true" tabindex="-1"></a>You need to select the the denominator to compute your proportions based on your research questions. You also need to make sure that if you are using R (or another software) to compute proportions that the proportions you want are being outputted.</span>
<span id="cb62-183"><a href="#cb62-183" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb62-184"><a href="#cb62-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-185"><a href="#cb62-185" aria-hidden="true" tabindex="-1"></a>&lt;br /&gt;</span>
<span id="cb62-186"><a href="#cb62-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-187"><a href="#cb62-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-188"><a href="#cb62-188" aria-hidden="true" tabindex="-1"></a><span class="fu">### Back to the RQ</span></span>
<span id="cb62-189"><a href="#cb62-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-190"><a href="#cb62-190" aria-hidden="true" tabindex="-1"></a>We wanted to know whether first generation students have a different predicted probability of obtaining a degree than non-first generation students. Thus, we want to use the row totals in our denominator. So we are comparing the proportion of all first generation students who got a degree to the proportion of all non-first generation students who got a degree.</span>
<span id="cb62-191"><a href="#cb62-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-192"><a href="#cb62-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-195"><a href="#cb62-195" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-196"><a href="#cb62-196" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportions to answer our RQ</span></span>
<span id="cb62-197"><a href="#cb62-197" aria-hidden="true" tabindex="-1"></a>grad <span class="sc">|&gt;</span></span>
<span id="cb62-198"><a href="#cb62-198" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(first_gen, degree) <span class="sc">|&gt;</span></span>
<span id="cb62-199"><a href="#cb62-199" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb62-200"><a href="#cb62-200" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-201"><a href="#cb62-201" aria-hidden="true" tabindex="-1"></a>    <span class="at">Prop =</span> N <span class="sc">/</span> <span class="fu">sum</span> (N)</span>
<span id="cb62-202"><a href="#cb62-202" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb62-203"><a href="#cb62-203" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb62-204"><a href="#cb62-204" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(degree <span class="sc">==</span> <span class="st">"Yes"</span>)</span>
<span id="cb62-205"><a href="#cb62-205" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-206"><a href="#cb62-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-207"><a href="#cb62-207" aria-hidden="true" tabindex="-1"></a>Based on the sample proportions, the proportion of first generation students who obtain a degree (0.780) is higher by 0.158 than the proportion of non-first generation students who obtain a degree (0.622). We could also plot this using a bar chart. The argument <span class="in">`position=position_dodge()`</span> creates the side-by-side plot. Otherwise the plot would be a stacked bar chart which gives the same information.</span>
<span id="cb62-208"><a href="#cb62-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-211"><a href="#cb62-211" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-212"><a href="#cb62-212" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: side-by-side-bar-chart</span></span>
<span id="cb62-213"><a href="#cb62-213" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Side-by-side barplot showing the proportion of first generation and non-first generation students in the sample who obtained and did not obtain a degree."</span></span>
<span id="cb62-214"><a href="#cb62-214" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Side-by-side barplot showing the proportion of first generation and non-first generation students in the sample who obtained and did not obtain a degree."</span></span>
<span id="cb62-215"><a href="#cb62-215" aria-hidden="true" tabindex="-1"></a><span class="co"># Side-by-side bar chart</span></span>
<span id="cb62-216"><a href="#cb62-216" aria-hidden="true" tabindex="-1"></a>grad <span class="sc">|&gt;</span></span>
<span id="cb62-217"><a href="#cb62-217" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(first_gen, degree) <span class="sc">|&gt;</span></span>
<span id="cb62-218"><a href="#cb62-218" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb62-219"><a href="#cb62-219" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-220"><a href="#cb62-220" aria-hidden="true" tabindex="-1"></a>    <span class="at">Prop =</span> N <span class="sc">/</span> <span class="fu">sum</span> (N)</span>
<span id="cb62-221"><a href="#cb62-221" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb62-222"><a href="#cb62-222" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb62-223"><a href="#cb62-223" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> first_gen, <span class="at">y =</span> Prop, <span class="at">fill =</span> degree)) <span class="sc">+</span></span>
<span id="cb62-224"><a href="#cb62-224" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"Identity"</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>()) <span class="sc">+</span></span>
<span id="cb62-225"><a href="#cb62-225" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb62-226"><a href="#cb62-226" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">"First Generation"</span>) <span class="sc">+</span></span>
<span id="cb62-227"><a href="#cb62-227" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"Proportion"</span>) <span class="sc">+</span></span>
<span id="cb62-228"><a href="#cb62-228" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb62-229"><a href="#cb62-229" aria-hidden="true" tabindex="-1"></a>      <span class="at">name =</span> <span class="st">"Obtained</span><span class="sc">\n</span><span class="st"> Degree"</span>,</span>
<span id="cb62-230"><a href="#cb62-230" aria-hidden="true" tabindex="-1"></a>      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#2EC4B6"</span>, <span class="st">"#E71D36"</span>)</span>
<span id="cb62-231"><a href="#cb62-231" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb62-232"><a href="#cb62-232" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-233"><a href="#cb62-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-234"><a href="#cb62-234" aria-hidden="true" tabindex="-1"></a>To evaluate whether this sample difference is more than we expect because of chance, we could create a dummy-coded indicator for first generation status and use that as a predictor in our logistic regression model.</span>
<span id="cb62-235"><a href="#cb62-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-238"><a href="#cb62-238" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-239"><a href="#cb62-239" aria-hidden="true" tabindex="-1"></a><span class="co"># Dummy code first_gen</span></span>
<span id="cb62-240"><a href="#cb62-240" aria-hidden="true" tabindex="-1"></a>grad <span class="ot">=</span> grad <span class="sc">|&gt;</span></span>
<span id="cb62-241"><a href="#cb62-241" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-242"><a href="#cb62-242" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_firstgen =</span> <span class="fu">if_else</span>(first_gen <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb62-243"><a href="#cb62-243" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-244"><a href="#cb62-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-245"><a href="#cb62-245" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit  model</span></span>
<span id="cb62-246"><a href="#cb62-246" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.2</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen, <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb62-247"><a href="#cb62-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-248"><a href="#cb62-248" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate first generation predictor</span></span>
<span id="cb62-249"><a href="#cb62-249" aria-hidden="true" tabindex="-1"></a><span class="fu">aictab</span>(</span>
<span id="cb62-250"><a href="#cb62-250" aria-hidden="true" tabindex="-1"></a>  <span class="at">cand.set =</span> <span class="fu">list</span>(glm<span class="fl">.0</span>, glm<span class="fl">.2</span>),</span>
<span id="cb62-251"><a href="#cb62-251" aria-hidden="true" tabindex="-1"></a>  <span class="at">modnames =</span> <span class="fu">c</span>(<span class="st">"Intercept-Only"</span>, <span class="st">"Effect of First Gen"</span>)</span>
<span id="cb62-252"><a href="#cb62-252" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb62-253"><a href="#cb62-253" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-254"><a href="#cb62-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-255"><a href="#cb62-255" aria-hidden="true" tabindex="-1"></a>Given the data and candidate models, the model that includes first generation status in the model has more evidence. Since we are comparing to the intercept-only model in this output, We can also use the information in the residual deviance column to compute a pseudo-$R^2$ value.</span>
<span id="cb62-256"><a href="#cb62-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-259"><a href="#cb62-259" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-260"><a href="#cb62-260" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute pseudo R2</span></span>
<span id="cb62-261"><a href="#cb62-261" aria-hidden="true" tabindex="-1"></a>(<span class="fl">2722.6</span> <span class="sc">-</span> <span class="fl">2662.1</span>) <span class="sc">/</span> <span class="fl">2722.6</span></span>
<span id="cb62-262"><a href="#cb62-262" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-263"><a href="#cb62-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-264"><a href="#cb62-264" aria-hidden="true" tabindex="-1"></a>The pseudo-$R^2$ value of 0.022 is close to 0, which suggests that first generation status although statistically relevant, is not incredibly predictive of the log-odds (or odds or probability) of obtaining a degree. Next we turn to the fitted equation:</span>
<span id="cb62-265"><a href="#cb62-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-268"><a href="#cb62-268" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-269"><a href="#cb62-269" aria-hidden="true" tabindex="-1"></a><span class="co"># Get coefficients</span></span>
<span id="cb62-270"><a href="#cb62-270" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(glm<span class="fl">.2</span>)</span>
<span id="cb62-271"><a href="#cb62-271" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-272"><a href="#cb62-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-273"><a href="#cb62-273" aria-hidden="true" tabindex="-1"></a>Based on this output, the fitted equation for the model is:</span>
<span id="cb62-274"><a href="#cb62-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-275"><a href="#cb62-275" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-276"><a href="#cb62-276" aria-hidden="true" tabindex="-1"></a>\ln \bigg( \frac{\hat\pi_i}{1 - \hat\pi_i}\bigg) = 0.50+ 0.77(\mathrm{First~Generation}_i)</span>
<span id="cb62-277"><a href="#cb62-277" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-278"><a href="#cb62-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-279"><a href="#cb62-279" aria-hidden="true" tabindex="-1"></a>Interpreting these coefficients in the log-odds metric:</span>
<span id="cb62-280"><a href="#cb62-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-281"><a href="#cb62-281" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Non-first generation students' predicted log-odds of obtaining a degree is 0.50.</span>
<span id="cb62-282"><a href="#cb62-282" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>First generation students' predicted log-odds of obtaining a degree is 0.767 higher than non-first generation students.</span>
<span id="cb62-283"><a href="#cb62-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-284"><a href="#cb62-284" aria-hidden="true" tabindex="-1"></a>To determine first generation students' log-odds of obtaining a degree, we substitute 1 into the fitted equation:</span>
<span id="cb62-285"><a href="#cb62-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-286"><a href="#cb62-286" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-287"><a href="#cb62-287" aria-hidden="true" tabindex="-1"></a>\begin{split}</span>
<span id="cb62-288"><a href="#cb62-288" aria-hidden="true" tabindex="-1"></a>\ln \bigg( \frac{\hat\pi_i}{1 - \hat\pi_i}\bigg) &amp;= 0.50+ 0.77(1) <span class="sc">\\</span><span class="co">[</span><span class="ot">1ex</span><span class="co">]</span></span>
<span id="cb62-289"><a href="#cb62-289" aria-hidden="true" tabindex="-1"></a>&amp;= 1.27</span>
<span id="cb62-290"><a href="#cb62-290" aria-hidden="true" tabindex="-1"></a>\end{split}</span>
<span id="cb62-291"><a href="#cb62-291" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-292"><a href="#cb62-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-293"><a href="#cb62-293" aria-hidden="true" tabindex="-1"></a>We can also transform the fitted equation into the odds metric and interpret.</span>
<span id="cb62-294"><a href="#cb62-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-295"><a href="#cb62-295" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-296"><a href="#cb62-296" aria-hidden="true" tabindex="-1"></a>\frac{\hat\pi_i}{1 - \hat\pi_i} = e^{0.50} \times e^{0.77(\mathrm{First~Generation}_i)}</span>
<span id="cb62-297"><a href="#cb62-297" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-298"><a href="#cb62-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-301"><a href="#cb62-301" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-302"><a href="#cb62-302" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform coefficients to odds metric</span></span>
<span id="cb62-303"><a href="#cb62-303" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="fu">coef</span>(glm<span class="fl">.2</span>))</span>
<span id="cb62-304"><a href="#cb62-304" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-305"><a href="#cb62-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-306"><a href="#cb62-306" aria-hidden="true" tabindex="-1"></a>Interpreting these coefficients in the odds metric:</span>
<span id="cb62-307"><a href="#cb62-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-308"><a href="#cb62-308" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Non-first generation students' predicted odds of obtaining a degree is 1.65. That is their probability of obtaining a degree is 1.64 times that of not obtaining a degree.</span>
<span id="cb62-309"><a href="#cb62-309" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>First generation students' predicted odds of obtaining a degree is 2.15 times higher than non-first generation students' odds of obtaining a degree.</span>
<span id="cb62-310"><a href="#cb62-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-311"><a href="#cb62-311" aria-hidden="true" tabindex="-1"></a>To determine first generation students' odds of obtaining a degree, we can either substitute 1 into the transformed fitted equation:</span>
<span id="cb62-312"><a href="#cb62-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-313"><a href="#cb62-313" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-314"><a href="#cb62-314" aria-hidden="true" tabindex="-1"></a>\begin{split}</span>
<span id="cb62-315"><a href="#cb62-315" aria-hidden="true" tabindex="-1"></a>\ln \bigg( \frac{\hat\pi_i}{1 - \hat\pi_i}\bigg) &amp;= e^{0.50} \times e^{0.77(1)} <span class="sc">\\</span><span class="co">[</span><span class="ot">1ex</span><span class="co">]</span></span>
<span id="cb62-316"><a href="#cb62-316" aria-hidden="true" tabindex="-1"></a>&amp;= 3.56</span>
<span id="cb62-317"><a href="#cb62-317" aria-hidden="true" tabindex="-1"></a>\end{split}</span>
<span id="cb62-318"><a href="#cb62-318" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-319"><a href="#cb62-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-320"><a href="#cb62-320" aria-hidden="true" tabindex="-1"></a>Or we could have transformed their log-odds directly ($e^{1.27}=3.56$). Finally, we could also transform the equation into the probability metric.</span>
<span id="cb62-321"><a href="#cb62-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-322"><a href="#cb62-322" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-323"><a href="#cb62-323" aria-hidden="true" tabindex="-1"></a>\hat\pi_i = \frac{e^{0.50+ 0.77(\mathrm{First~Generation}_i)}}{1 + e^{0.50+ 0.77(\mathrm{First~Generation}_i)}}</span>
<span id="cb62-324"><a href="#cb62-324" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-325"><a href="#cb62-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-328"><a href="#cb62-328" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-329"><a href="#cb62-329" aria-hidden="true" tabindex="-1"></a><span class="co"># Prob non-first gen students</span></span>
<span id="cb62-330"><a href="#cb62-330" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="fl">0.50</span>) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="fu">exp</span>(<span class="fl">0.50</span>))</span>
<span id="cb62-331"><a href="#cb62-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-332"><a href="#cb62-332" aria-hidden="true" tabindex="-1"></a><span class="co"># Prob first gen students</span></span>
<span id="cb62-333"><a href="#cb62-333" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="fl">0.50</span> <span class="sc">+</span> <span class="fl">0.77</span>) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="fu">exp</span>(<span class="fl">0.50</span> <span class="sc">+</span> <span class="fl">0.77</span>))</span>
<span id="cb62-334"><a href="#cb62-334" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-335"><a href="#cb62-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-336"><a href="#cb62-336" aria-hidden="true" tabindex="-1"></a>In the probability metric we just compute the predicted probabilities and report/compare them. There is no easy conversion of the slope coefficient to interpret how much higher the probability of obtaining a degree for first generation students is than for non-first generation students.</span>
<span id="cb62-337"><a href="#cb62-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-338"><a href="#cb62-338" aria-hidden="true" tabindex="-1"></a>&lt;br /&gt;</span>
<span id="cb62-339"><a href="#cb62-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-340"><a href="#cb62-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-341"><a href="#cb62-341" aria-hidden="true" tabindex="-1"></a><span class="fu">### Evaluating Assumptions</span></span>
<span id="cb62-342"><a href="#cb62-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-343"><a href="#cb62-343" aria-hidden="true" tabindex="-1"></a>When the only predictor in a logistic model is categorical, the only thing we need to pay attention to is whether the average residual for each level of the predictor is close to 0. We can again use the <span class="in">`binned_residuals()`</span> function to evaluate this. When the predictor is categorical, the binning will be done on the levels of the predictor.</span>
<span id="cb62-344"><a href="#cb62-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-345"><a href="#cb62-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-348"><a href="#cb62-348" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-349"><a href="#cb62-349" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-resid-lm2</span></span>
<span id="cb62-350"><a href="#cb62-350" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Binned residuals versus the binned fitted values for the model that includes the effect of first generation status to predict the log-odds of obtaining a degree."</span></span>
<span id="cb62-351"><a href="#cb62-351" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Binned residuals versus the binned fitted values for the model that includes the effect of first generation status to predict the log-odds of obtaining a degree."</span></span>
<span id="cb62-352"><a href="#cb62-352" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: true</span></span>
<span id="cb62-353"><a href="#cb62-353" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtain average fitted values and average residuals</span></span>
<span id="cb62-354"><a href="#cb62-354" aria-hidden="true" tabindex="-1"></a>out<span class="fl">.2</span> <span class="ot">=</span> <span class="fu">binned_residuals</span>(glm<span class="fl">.2</span>)</span>
<span id="cb62-355"><a href="#cb62-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-356"><a href="#cb62-356" aria-hidden="true" tabindex="-1"></a><span class="co"># View data frame</span></span>
<span id="cb62-357"><a href="#cb62-357" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(out<span class="fl">.2</span>)</span>
<span id="cb62-358"><a href="#cb62-358" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-359"><a href="#cb62-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-360"><a href="#cb62-360" aria-hidden="true" tabindex="-1"></a>Here we see the average residual (<span class="in">`ybar`</span>) for both groups is near zero. This satisfies the linearity assumption. If you examined the binned residual plot, you would also see this, albeit in a graphical form.</span>
<span id="cb62-361"><a href="#cb62-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-362"><a href="#cb62-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-363"><a href="#cb62-363" aria-hidden="true" tabindex="-1"></a>The results from <span class="in">`glm.2`</span> indicated that there were differences between first and non-first generation students in the probability of obtaining a degree. Based on this model's result, we found that the predicted probability of obtaining a degre for first generation students was 0.780 while that for non-first generation students was 0.622. Does this difference persist after controlling for other covariates? </span>
<span id="cb62-364"><a href="#cb62-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-365"><a href="#cb62-365" aria-hidden="true" tabindex="-1"></a>To examine this, we want to fit a set of models that systematically include potential covariates along with first generation status. Our strategy for this is to start with the most important covariate. We can compare the model that includes first generation status and this covariate to a model that just includes first generation status. If the evidence indicates that the model with only first generation status is important we are done. If the evidence points toward the model that also includes the most important covariate, then we will continue by comparing that model to one that includes first generation status and the two most important covariates. We will continue with these comparisons until we adopt a final model or models.</span>
<span id="cb62-366"><a href="#cb62-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-367"><a href="#cb62-367" aria-hidden="true" tabindex="-1"></a>To determine the order of importance, we can compute the correlations between each covariate and the dummy-coded outcome.</span>
<span id="cb62-368"><a href="#cb62-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-371"><a href="#cb62-371" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-372"><a href="#cb62-372" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlations</span></span>
<span id="cb62-373"><a href="#cb62-373" aria-hidden="true" tabindex="-1"></a>grad <span class="sc">|&gt;</span></span>
<span id="cb62-374"><a href="#cb62-374" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(got_degree, act, scholarship, ap_courses,is_nontrad) <span class="sc">|&gt;</span></span>
<span id="cb62-375"><a href="#cb62-375" aria-hidden="true" tabindex="-1"></a>  <span class="fu">correlate</span>()</span>
<span id="cb62-376"><a href="#cb62-376" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-377"><a href="#cb62-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-378"><a href="#cb62-378" aria-hidden="true" tabindex="-1"></a>The rank ordering of covariates (based on the absolute value of the correlation coefficients) will be:</span>
<span id="cb62-379"><a href="#cb62-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-380"><a href="#cb62-380" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>ACT scores ($r = 0.195$, most important)</span>
<span id="cb62-381"><a href="#cb62-381" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Number of AP courses ($r = 0.149$)</span>
<span id="cb62-382"><a href="#cb62-382" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Scholarship amount ($r = 0.142$)</span>
<span id="cb62-383"><a href="#cb62-383" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Non-traditional status ($r = -0.084$)</span>
<span id="cb62-384"><a href="#cb62-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-385"><a href="#cb62-385" aria-hidden="true" tabindex="-1"></a>&lt;br /&gt;</span>
<span id="cb62-386"><a href="#cb62-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-387"><a href="#cb62-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-388"><a href="#cb62-388" aria-hidden="true" tabindex="-1"></a><span class="fu">## Non-Linear Effect of ACT</span></span>
<span id="cb62-389"><a href="#cb62-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-390"><a href="#cb62-390" aria-hidden="true" tabindex="-1"></a>To begin the analysis, we will include ACT scores as a covariate in the model. Since the <span class="in">`act`</span> variable is continuous, we need to use the "correct" functional form when we include it in the model. In the previous set of notes, we saw some misfit when we examined the binned residual plot for the logistic regression model that included ACT as a predictor of the probability of obtaining a degree. One possibility is that this may be because the effect of ACT on these probabilities is non-linear. To examine this, we can plot the empirical log-odds of obtaining a degree versus ACT scores, and examine the functional form of the relationship.</span>
<span id="cb62-391"><a href="#cb62-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-392"><a href="#cb62-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-395"><a href="#cb62-395" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-396"><a href="#cb62-396" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-ln-odds-act</span></span>
<span id="cb62-397"><a href="#cb62-397" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Log-odds of obtaining a degree conditional on ACT score. Size of the dot is proportional to sample size. The loess smoother is also weighted based on the sample size."</span></span>
<span id="cb62-398"><a href="#cb62-398" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Log-odds of obtaining a degree conditional on ACT score. Size of the dot is proportional to sample size. The loess smoother is also weighted based on the sample size."</span></span>
<span id="cb62-399"><a href="#cb62-399" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb62-400"><a href="#cb62-400" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb62-401"><a href="#cb62-401" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "60%"</span></span>
<span id="cb62-402"><a href="#cb62-402" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb62-403"><a href="#cb62-403" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtain the log-odds who obtain a degree for each ACT score</span></span>
<span id="cb62-404"><a href="#cb62-404" aria-hidden="true" tabindex="-1"></a>prop_grad <span class="ot">=</span> grad <span class="sc">|&gt;</span> </span>
<span id="cb62-405"><a href="#cb62-405" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(act, degree) <span class="sc">|&gt;</span> </span>
<span id="cb62-406"><a href="#cb62-406" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb62-407"><a href="#cb62-407" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-408"><a href="#cb62-408" aria-hidden="true" tabindex="-1"></a>    <span class="at">Prop =</span> N <span class="sc">/</span> <span class="fu">sum</span> (N)</span>
<span id="cb62-409"><a href="#cb62-409" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb62-410"><a href="#cb62-410" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb62-411"><a href="#cb62-411" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(degree <span class="sc">==</span> <span class="st">"Yes"</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-412"><a href="#cb62-412" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-413"><a href="#cb62-413" aria-hidden="true" tabindex="-1"></a>    <span class="at">Odds =</span> Prop <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> Prop),</span>
<span id="cb62-414"><a href="#cb62-414" aria-hidden="true" tabindex="-1"></a>    <span class="at">Logits =</span> <span class="fu">log</span>(Odds)</span>
<span id="cb62-415"><a href="#cb62-415" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-416"><a href="#cb62-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-417"><a href="#cb62-417" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatterplot</span></span>
<span id="cb62-418"><a href="#cb62-418" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> prop_grad, <span class="fu">aes</span>(<span class="at">x =</span> act, <span class="at">y =</span> Logits)) <span class="sc">+</span></span>
<span id="cb62-419"><a href="#cb62-419" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> N)) <span class="sc">+</span></span>
<span id="cb62-420"><a href="#cb62-420" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">weight =</span> N), <span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb62-421"><a href="#cb62-421" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb62-422"><a href="#cb62-422" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ACT score"</span>) <span class="sc">+</span></span>
<span id="cb62-423"><a href="#cb62-423" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Log-odds of obtaining a degree"</span>)</span>
<span id="cb62-424"><a href="#cb62-424" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-425"><a href="#cb62-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-426"><a href="#cb62-426" aria-hidden="true" tabindex="-1"></a>This suggests a non-linear relationship between ACT score and the log-odds of obtaining a degree. Using the Rule-of-the-Bulge, we can try to linearize this relationship by:</span>
<span id="cb62-427"><a href="#cb62-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-428"><a href="#cb62-428" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Including a quadratic effect of ACT; or</span>
<span id="cb62-429"><a href="#cb62-429" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Log-transforming the ACT variable.</span>
<span id="cb62-430"><a href="#cb62-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-433"><a href="#cb62-433" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-434"><a href="#cb62-434" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-residuals</span></span>
<span id="cb62-435"><a href="#cb62-435" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Binned residual plots for two models that include non-linear effects of ACT. The quadratic model (LEFT) and the log-linear model (RIGHT)."</span></span>
<span id="cb62-436"><a href="#cb62-436" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Binned residual plots for two models that include non-linear effects of ACT. The quadratic model (LEFT) and the log-linear model (RIGHT)."</span></span>
<span id="cb62-437"><a href="#cb62-437" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 10</span></span>
<span id="cb62-438"><a href="#cb62-438" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb62-439"><a href="#cb62-439" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "100%"</span></span>
<span id="cb62-440"><a href="#cb62-440" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit non-linear models</span></span>
<span id="cb62-441"><a href="#cb62-441" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.1</span>_quad <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> act <span class="sc">+</span> <span class="fu">I</span>(act<span class="sc">^</span><span class="dv">2</span>), <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb62-442"><a href="#cb62-442" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.1</span>_log <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> <span class="fu">log</span>(act), <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb62-443"><a href="#cb62-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-444"><a href="#cb62-444" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtain binned residuals</span></span>
<span id="cb62-445"><a href="#cb62-445" aria-hidden="true" tabindex="-1"></a>out<span class="fl">.1</span>_quad <span class="ot">=</span> <span class="fu">binned_residuals</span>(glm<span class="fl">.1</span>_quad)</span>
<span id="cb62-446"><a href="#cb62-446" aria-hidden="true" tabindex="-1"></a>out<span class="fl">.1</span>_log <span class="ot">=</span> <span class="fu">binned_residuals</span>(glm<span class="fl">.1</span>_log)</span>
<span id="cb62-447"><a href="#cb62-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-448"><a href="#cb62-448" aria-hidden="true" tabindex="-1"></a><span class="co"># Binned residual plots</span></span>
<span id="cb62-449"><a href="#cb62-449" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(out<span class="fl">.1</span>_quad) <span class="sc">|</span> <span class="fu">plot</span>(out<span class="fl">.1</span>_log)</span>
<span id="cb62-450"><a href="#cb62-450" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-451"><a href="#cb62-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-452"><a href="#cb62-452" aria-hidden="true" tabindex="-1"></a>The binned residuals show slight misfit to both the log-linear model and the quadratic model. We also examine the empirical support via information criteria.</span>
<span id="cb62-453"><a href="#cb62-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-456"><a href="#cb62-456" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-457"><a href="#cb62-457" aria-hidden="true" tabindex="-1"></a><span class="fu">aictab</span>(</span>
<span id="cb62-458"><a href="#cb62-458" aria-hidden="true" tabindex="-1"></a>  <span class="at">cand.set =</span> <span class="fu">list</span>(glm<span class="fl">.1</span>, glm<span class="fl">.1</span>_quad, glm<span class="fl">.1</span>_log),</span>
<span id="cb62-459"><a href="#cb62-459" aria-hidden="true" tabindex="-1"></a>  <span class="at">modnames =</span> <span class="fu">c</span>(<span class="st">"Linear Effect"</span>, <span class="st">"Quadratic Effect"</span>, <span class="st">"Log-Linear Effect"</span>)</span>
<span id="cb62-460"><a href="#cb62-460" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb62-461"><a href="#cb62-461" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-462"><a href="#cb62-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-463"><a href="#cb62-463" aria-hidden="true" tabindex="-1"></a>Here the most empirically supported model (given the data and the candidate models) is the quadratic model, although there is also a great deal of support for the log-linear model. I would probably adopt the log-linear model based on its simplicity and the theoretical rationale that I would not expect the probability of graduating to be smaller for high ACT values. But, for pedagogical purposes, we will look at and interpret the output for both models.</span>
<span id="cb62-464"><a href="#cb62-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-465"><a href="#cb62-465" aria-hidden="true" tabindex="-1"></a>&lt;br /&gt;</span>
<span id="cb62-466"><a href="#cb62-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-467"><a href="#cb62-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-468"><a href="#cb62-468" aria-hidden="true" tabindex="-1"></a><span class="fu">### Quadratic Effect of ACT</span></span>
<span id="cb62-469"><a href="#cb62-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-470"><a href="#cb62-470" aria-hidden="true" tabindex="-1"></a>We will start our interpretation by examining the <span class="in">`coef()`</span> output.</span>
<span id="cb62-471"><a href="#cb62-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-474"><a href="#cb62-474" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-475"><a href="#cb62-475" aria-hidden="true" tabindex="-1"></a><span class="co"># Get coefficients</span></span>
<span id="cb62-476"><a href="#cb62-476" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(glm<span class="fl">.1</span>_quad)</span>
<span id="cb62-477"><a href="#cb62-477" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-478"><a href="#cb62-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-479"><a href="#cb62-479" aria-hidden="true" tabindex="-1"></a>The fitted model is:</span>
<span id="cb62-480"><a href="#cb62-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-481"><a href="#cb62-481" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-482"><a href="#cb62-482" aria-hidden="true" tabindex="-1"></a>\ln \bigg( \frac{\hat\pi_i}{1 - \hat\pi_i}\bigg) = -4.57 + 0.37(\mathrm{ACT}_i) - 0.005(\mathrm{ACT}_i^2)</span>
<span id="cb62-483"><a href="#cb62-483" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-484"><a href="#cb62-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-485"><a href="#cb62-485" aria-hidden="true" tabindex="-1"></a>Since this is an interaction model, we interpret the effect of ACT as: The effect of ACT on the log-odds of obtaining a degree depends on ACT. (We could also graph this effect if we were interested in the effect of ACT on the log-odds of obtaining a degree.)</span>
<span id="cb62-486"><a href="#cb62-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-487"><a href="#cb62-487" aria-hidden="true" tabindex="-1"></a>Transforming the fitted equation to the odds metric:</span>
<span id="cb62-488"><a href="#cb62-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-489"><a href="#cb62-489" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-490"><a href="#cb62-490" aria-hidden="true" tabindex="-1"></a>\frac{\hat\pi_i}{1 - \hat\pi_i} = e^{-4.57} \times e^{0.37(\mathrm{ACT}_i)} \times e^ {-0.005(\mathrm{ACT}_i^2)}</span>
<span id="cb62-491"><a href="#cb62-491" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-492"><a href="#cb62-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-493"><a href="#cb62-493" aria-hidden="true" tabindex="-1"></a>Because changing ACT now impacts two exponent terms, one of which includes the quadratic of ACT, it is super essential that we create a plot to interpret the effects of ACT on the odds of obtaining a degree.</span>
<span id="cb62-494"><a href="#cb62-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-497"><a href="#cb62-497" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-498"><a href="#cb62-498" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-quad-fitted</span></span>
<span id="cb62-499"><a href="#cb62-499" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Predicted odds of obtaining a degree as a function of ACT score."</span></span>
<span id="cb62-500"><a href="#cb62-500" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Predicted odds of obtaining a degree as a function of ACT score."</span></span>
<span id="cb62-501"><a href="#cb62-501" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the fitted equation</span></span>
<span id="cb62-502"><a href="#cb62-502" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> grad, <span class="fu">aes</span>(<span class="at">x =</span> act, <span class="at">y =</span> got_degree)) <span class="sc">+</span></span>
<span id="cb62-503"><a href="#cb62-503" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb62-504"><a href="#cb62-504" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb62-505"><a href="#cb62-505" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">4.57</span> <span class="sc">+</span> <span class="fl">0.37</span><span class="sc">*</span>x <span class="sc">-</span> <span class="fl">0.005</span><span class="sc">*</span>x<span class="sc">^</span><span class="dv">2</span>)}</span>
<span id="cb62-506"><a href="#cb62-506" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb62-507"><a href="#cb62-507" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb62-508"><a href="#cb62-508" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ACT score"</span>) <span class="sc">+</span></span>
<span id="cb62-509"><a href="#cb62-509" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted odds of obtaining a degree"</span>)</span>
<span id="cb62-510"><a href="#cb62-510" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-511"><a href="#cb62-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-512"><a href="#cb62-512" aria-hidden="true" tabindex="-1"></a>The odds curve is somewhat "S"-shaped (although it is not constrained between 0 and 1 like the probability curve). This is because of the quadratic effect of ACT. The overall trend is one of exponential growth, although the rate-of-change is not constant within this curve. The most rapid change in the odds of obtaining a degree occurs at ACT scores between 20 and 30.</span>
<span id="cb62-513"><a href="#cb62-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-514"><a href="#cb62-514" aria-hidden="true" tabindex="-1"></a>Finally, we could also transform the equation into the probability metric. The fitted equation is:</span>
<span id="cb62-515"><a href="#cb62-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-516"><a href="#cb62-516" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-517"><a href="#cb62-517" aria-hidden="true" tabindex="-1"></a>\hat\pi_i = \frac{e^{-4.57 + 0.37(\mathrm{ACT}_i) - 0.005(\mathrm{ACT}_i^2)}}{1 + e^{-4.57 + 0.37(\mathrm{ACT}_i) - 0.005(\mathrm{ACT}_i^2)}}</span>
<span id="cb62-518"><a href="#cb62-518" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-519"><a href="#cb62-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-520"><a href="#cb62-520" aria-hidden="true" tabindex="-1"></a>Again, it is worthwhile to create a plot to interpret the effects of ACT on the probability of obtaining a degree.</span>
<span id="cb62-521"><a href="#cb62-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-524"><a href="#cb62-524" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-525"><a href="#cb62-525" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-quad-fitted-prob</span></span>
<span id="cb62-526"><a href="#cb62-526" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Predicted probability of obtaining a degree as a function of ACT score."</span></span>
<span id="cb62-527"><a href="#cb62-527" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Predicted probability of obtaining a degree as a function of ACT score."</span></span>
<span id="cb62-528"><a href="#cb62-528" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the fitted equation</span></span>
<span id="cb62-529"><a href="#cb62-529" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> grad, <span class="fu">aes</span>(<span class="at">x =</span> act, <span class="at">y =</span> got_degree)) <span class="sc">+</span></span>
<span id="cb62-530"><a href="#cb62-530" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb62-531"><a href="#cb62-531" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb62-532"><a href="#cb62-532" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">4.57</span> <span class="sc">+</span> <span class="fl">0.37</span><span class="sc">*</span>x <span class="sc">-</span> <span class="fl">0.005</span><span class="sc">*</span>x<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">4.57</span> <span class="sc">+</span> <span class="fl">0.37</span><span class="sc">*</span>x <span class="sc">-</span> <span class="fl">0.005</span><span class="sc">*</span>x<span class="sc">^</span><span class="dv">2</span>))}</span>
<span id="cb62-533"><a href="#cb62-533" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb62-534"><a href="#cb62-534" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb62-535"><a href="#cb62-535" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ACT score"</span>) <span class="sc">+</span></span>
<span id="cb62-536"><a href="#cb62-536" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted probability of obtaining a degree"</span>)</span>
<span id="cb62-537"><a href="#cb62-537" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-538"><a href="#cb62-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-539"><a href="#cb62-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-540"><a href="#cb62-540" aria-hidden="true" tabindex="-1"></a>The probability curve is "S"-shaped and constrained between 0 and 1. The left-hand side of the "S" is compressed, probably due to the range of ACT scores. ACT has the largest effect on the probability of obtaining a degree for scores less than 25, and then the effect begins to plateau (although it is still growing as the logistic curve is monotonic).</span>
<span id="cb62-541"><a href="#cb62-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-542"><a href="#cb62-542" aria-hidden="true" tabindex="-1"></a>&lt;br /&gt;</span>
<span id="cb62-543"><a href="#cb62-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-544"><a href="#cb62-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-545"><a href="#cb62-545" aria-hidden="true" tabindex="-1"></a><span class="fu">### Log-Linear Effect of ACT</span></span>
<span id="cb62-546"><a href="#cb62-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-547"><a href="#cb62-547" aria-hidden="true" tabindex="-1"></a>We will again start our interpretation by examining the <span class="in">`coef()`</span> output.</span>
<span id="cb62-548"><a href="#cb62-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-551"><a href="#cb62-551" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-552"><a href="#cb62-552" aria-hidden="true" tabindex="-1"></a><span class="co"># Get coefficients</span></span>
<span id="cb62-553"><a href="#cb62-553" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(glm<span class="fl">.1</span>_log)</span>
<span id="cb62-554"><a href="#cb62-554" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-555"><a href="#cb62-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-556"><a href="#cb62-556" aria-hidden="true" tabindex="-1"></a>The fitted model is:</span>
<span id="cb62-557"><a href="#cb62-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-558"><a href="#cb62-558" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-559"><a href="#cb62-559" aria-hidden="true" tabindex="-1"></a>\ln \bigg( \frac{\hat\pi_i}{1 - \hat\pi_i}\bigg) = -6.94 + 2.50\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT}_i)\bigg</span><span class="co">]</span></span>
<span id="cb62-560"><a href="#cb62-560" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-561"><a href="#cb62-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-562"><a href="#cb62-562" aria-hidden="true" tabindex="-1"></a>We interpret the effect of ACT as: Each 1% difference in ACT score is associated with a .025-unit change in the log-odds of obtaining a degree.</span>
<span id="cb62-563"><a href="#cb62-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-564"><a href="#cb62-564" aria-hidden="true" tabindex="-1"></a>Transforming the fitted equation to the odds metric:</span>
<span id="cb62-565"><a href="#cb62-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-566"><a href="#cb62-566" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-567"><a href="#cb62-567" aria-hidden="true" tabindex="-1"></a>\frac{\hat\pi_i}{1 - \hat\pi_i} = e^{-6.94} \times e^{2.50\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT}_i)\bigg</span><span class="co">]</span>}</span>
<span id="cb62-568"><a href="#cb62-568" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-569"><a href="#cb62-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-570"><a href="#cb62-570" aria-hidden="true" tabindex="-1"></a>It is again easier to interpret the effects of ACT on the odds of obtaining a degree by creating a plot .</span>
<span id="cb62-571"><a href="#cb62-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-574"><a href="#cb62-574" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-575"><a href="#cb62-575" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-ln-fitted</span></span>
<span id="cb62-576"><a href="#cb62-576" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Predicted odds of obtaining a degree as a function of ACT score."</span></span>
<span id="cb62-577"><a href="#cb62-577" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Predicted odds of obtaining a degree as a function of ACT score."</span></span>
<span id="cb62-578"><a href="#cb62-578" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the fitted equation</span></span>
<span id="cb62-579"><a href="#cb62-579" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> grad, <span class="fu">aes</span>(<span class="at">x =</span> act, <span class="at">y =</span> got_degree)) <span class="sc">+</span></span>
<span id="cb62-580"><a href="#cb62-580" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb62-581"><a href="#cb62-581" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb62-582"><a href="#cb62-582" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">6.94</span> <span class="sc">+</span> <span class="fl">2.50</span><span class="sc">*</span><span class="fu">log</span>(x))}</span>
<span id="cb62-583"><a href="#cb62-583" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb62-584"><a href="#cb62-584" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb62-585"><a href="#cb62-585" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ACT score"</span>) <span class="sc">+</span></span>
<span id="cb62-586"><a href="#cb62-586" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted odds of obtaining a degree"</span>)</span>
<span id="cb62-587"><a href="#cb62-587" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-588"><a href="#cb62-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-589"><a href="#cb62-589" aria-hidden="true" tabindex="-1"></a>The effect of ACT on the probability of obtaining a degree is positive and non-linear (exponential growth). The predicted odds of obtaining a degree increases exponentially for higher ACT scores.</span>
<span id="cb62-590"><a href="#cb62-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-591"><a href="#cb62-591" aria-hidden="true" tabindex="-1"></a>Finally, we could also transform the equation into the probability metric. The fitted equation is:</span>
<span id="cb62-592"><a href="#cb62-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-593"><a href="#cb62-593" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-594"><a href="#cb62-594" aria-hidden="true" tabindex="-1"></a>\hat\pi_i = \frac{e^{-6.94 + 2.50\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT}_i)\bigg</span><span class="co">]</span>}}{1 + e^{-6.94 + 2.50\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT}_i)\bigg</span><span class="co">]</span>}}</span>
<span id="cb62-595"><a href="#cb62-595" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-596"><a href="#cb62-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-597"><a href="#cb62-597" aria-hidden="true" tabindex="-1"></a>Again, it is worthwhile to create a plot to interpret the effects of ACT on the probability of obtaining a degree.</span>
<span id="cb62-598"><a href="#cb62-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-601"><a href="#cb62-601" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-602"><a href="#cb62-602" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-ln-fitted-prob</span></span>
<span id="cb62-603"><a href="#cb62-603" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Predicted probability of obtaining a degree as a function of ACT score."</span></span>
<span id="cb62-604"><a href="#cb62-604" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Predicted probability of obtaining a degree as a function of ACT score."</span></span>
<span id="cb62-605"><a href="#cb62-605" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the fitted equation</span></span>
<span id="cb62-606"><a href="#cb62-606" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> grad, <span class="fu">aes</span>(<span class="at">x =</span> act, <span class="at">y =</span> got_degree)) <span class="sc">+</span></span>
<span id="cb62-607"><a href="#cb62-607" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb62-608"><a href="#cb62-608" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb62-609"><a href="#cb62-609" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">6.94</span> <span class="sc">+</span> <span class="fl">2.50</span><span class="sc">*</span><span class="fu">log</span>(x)) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">6.94</span> <span class="sc">+</span> <span class="fl">2.50</span><span class="sc">*</span><span class="fu">log</span>(x)))}</span>
<span id="cb62-610"><a href="#cb62-610" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb62-611"><a href="#cb62-611" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb62-612"><a href="#cb62-612" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ACT score"</span>) <span class="sc">+</span></span>
<span id="cb62-613"><a href="#cb62-613" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted probability of obtaining a degree"</span>)</span>
<span id="cb62-614"><a href="#cb62-614" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-615"><a href="#cb62-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-616"><a href="#cb62-616" aria-hidden="true" tabindex="-1"></a>The effect of ACT on the probability of obtaining a degree is positive and non-linear. ACT has a larger effect on the probability of obtaining a degree for smaller ACT scores and this effect, while still positive, diminishes for higher ACT scores.</span>
<span id="cb62-617"><a href="#cb62-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-618"><a href="#cb62-618" aria-hidden="true" tabindex="-1"></a>:::fyi</span>
<span id="cb62-619"><a href="#cb62-619" aria-hidden="true" tabindex="-1"></a>**PROTIP**</span>
<span id="cb62-620"><a href="#cb62-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-621"><a href="#cb62-621" aria-hidden="true" tabindex="-1"></a>Once you include non-linear effects in the model, always create a plot of the fitted equation to try and interpret odds or probabilities.</span>
<span id="cb62-622"><a href="#cb62-622" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb62-623"><a href="#cb62-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-624"><a href="#cb62-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-625"><a href="#cb62-625" aria-hidden="true" tabindex="-1"></a>&lt;br /&gt;</span>
<span id="cb62-626"><a href="#cb62-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-627"><a href="#cb62-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-628"><a href="#cb62-628" aria-hidden="true" tabindex="-1"></a><span class="fu">## Adding Covariates: Main Effects Models</span></span>
<span id="cb62-629"><a href="#cb62-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-630"><a href="#cb62-630" aria-hidden="true" tabindex="-1"></a>Now that we have settled on a functional form for the effect of ACT, we can include it as a covariate in a model with first generation status. Including covariates in the logistic model is done the same way as for <span class="in">`lm()`</span> models. We fit that model with the following syntax:</span>
<span id="cb62-631"><a href="#cb62-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-634"><a href="#cb62-634" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-635"><a href="#cb62-635" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit main effects model</span></span>
<span id="cb62-636"><a href="#cb62-636" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.3</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act), <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb62-637"><a href="#cb62-637" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-638"><a href="#cb62-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-639"><a href="#cb62-639" aria-hidden="true" tabindex="-1"></a>To evaluate this model, and to begin to provide an answer for our research question, we will examine the model evidence comparing this model to both the baseline model (intercept-only) and the model that included the main-effect of first generation status.</span>
<span id="cb62-640"><a href="#cb62-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-643"><a href="#cb62-643" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-644"><a href="#cb62-644" aria-hidden="true" tabindex="-1"></a><span class="co"># Model evidence</span></span>
<span id="cb62-645"><a href="#cb62-645" aria-hidden="true" tabindex="-1"></a><span class="fu">aictab</span>(</span>
<span id="cb62-646"><a href="#cb62-646" aria-hidden="true" tabindex="-1"></a>  <span class="at">cand.set =</span> <span class="fu">list</span>(glm<span class="fl">.0</span>, glm<span class="fl">.2</span>, glm<span class="fl">.3</span>),</span>
<span id="cb62-647"><a href="#cb62-647" aria-hidden="true" tabindex="-1"></a>  <span class="at">modnames =</span> <span class="fu">c</span>(<span class="st">"Intercept-Only"</span>, <span class="st">"First Gen."</span>, <span class="st">"First Gen. + ACT"</span>)</span>
<span id="cb62-648"><a href="#cb62-648" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb62-649"><a href="#cb62-649" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-650"><a href="#cb62-650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-651"><a href="#cb62-651" aria-hidden="true" tabindex="-1"></a>Given the data and candidate models fitted, the empirical evidence overwhelmingly supports including both ACT scores and first generation status in the model. Adopting this model, we next look at the coefficients:</span>
<span id="cb62-652"><a href="#cb62-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-653"><a href="#cb62-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-656"><a href="#cb62-656" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-657"><a href="#cb62-657" aria-hidden="true" tabindex="-1"></a><span class="co"># Coefficients</span></span>
<span id="cb62-658"><a href="#cb62-658" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(glm<span class="fl">.3</span>)</span>
<span id="cb62-659"><a href="#cb62-659" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-660"><a href="#cb62-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-661"><a href="#cb62-661" aria-hidden="true" tabindex="-1"></a>The fitted equation is:</span>
<span id="cb62-662"><a href="#cb62-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-663"><a href="#cb62-663" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-664"><a href="#cb62-664" aria-hidden="true" tabindex="-1"></a>\ln \bigg( \frac{\hat\pi_i}{1 - \hat\pi_i}\bigg) = -5.91 + 0.51(\mathrm{First~Generation}_i) + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span></span>
<span id="cb62-665"><a href="#cb62-665" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-666"><a href="#cb62-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-667"><a href="#cb62-667" aria-hidden="true" tabindex="-1"></a>Using the logit/log-odds metric, we interpret the coefficients as:</span>
<span id="cb62-668"><a href="#cb62-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-669"><a href="#cb62-669" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Non-first generations students with an ACT score of 1 have a predicted log-odds of graduating of $-5.91$.</span>
<span id="cb62-670"><a href="#cb62-670" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Each 1% difference in ACT score is associated with a difference of 0.02 in the predicted log-odds of graduating, after controlling for first generation status.</span>
<span id="cb62-671"><a href="#cb62-671" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>First generation college students, have a predicted log-odds of graduating that is 0.51 higher than students who are not first generation students, after controlling for differences in ACT scores.</span>
<span id="cb62-672"><a href="#cb62-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-673"><a href="#cb62-673" aria-hidden="true" tabindex="-1"></a>&lt;br /&gt;</span>
<span id="cb62-674"><a href="#cb62-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-675"><a href="#cb62-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-676"><a href="#cb62-676" aria-hidden="true" tabindex="-1"></a><span class="fu">### Back-Transforming to Odds</span></span>
<span id="cb62-677"><a href="#cb62-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-678"><a href="#cb62-678" aria-hidden="true" tabindex="-1"></a>If we back-transform the coefficients to facilitate interpretations using the odds metric, the fitted equation is:</span>
<span id="cb62-679"><a href="#cb62-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-680"><a href="#cb62-680" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-681"><a href="#cb62-681" aria-hidden="true" tabindex="-1"></a>\begin{split}</span>
<span id="cb62-682"><a href="#cb62-682" aria-hidden="true" tabindex="-1"></a>\frac{\hat\pi_i}{1 - \hat\pi_i} &amp;= e^{-5.91 + 0.51(\mathrm{First~Generation}_i) + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>} <span class="sc">\\</span><span class="co">[</span><span class="ot">1ex</span><span class="co">]</span></span>
<span id="cb62-683"><a href="#cb62-683" aria-hidden="true" tabindex="-1"></a>&amp;=e^{-5.91} \times e^{0.51(\mathrm{First~Generation}_i)} \times e^{2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>}</span>
<span id="cb62-684"><a href="#cb62-684" aria-hidden="true" tabindex="-1"></a>\end{split}</span>
<span id="cb62-685"><a href="#cb62-685" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-686"><a href="#cb62-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-687"><a href="#cb62-687" aria-hidden="true" tabindex="-1"></a>We can interpret the intercept and the effect of first generation status directly:</span>
<span id="cb62-688"><a href="#cb62-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-689"><a href="#cb62-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-690"><a href="#cb62-690" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Non-first generations students with an ACT score of 1 have a predicted odds of graduating of $e^{-5.91}=.003$.</span>
<span id="cb62-691"><a href="#cb62-691" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>First generation college students, have a predicted odds of graduating that is $e^{0.51}=1.66$ times higher than that for non-first generations students, after controlling for differences in ACT scores.</span>
<span id="cb62-692"><a href="#cb62-692" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Each one-point difference in ACT score is associated with improving the odds of graduating 1.09 times, on average, after controlling for whether or not the students are first generation college students.</span>
<span id="cb62-693"><a href="#cb62-693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-694"><a href="#cb62-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-695"><a href="#cb62-695" aria-hidden="true" tabindex="-1"></a>While it is not pertinent to the research question, if you wanted to interpret the effect of ACT, you could plot the fitted model. As always with main effects models, we find the fitted equation for first generation and non-first generation students, and plot the two curves separately using multiple <span class="in">`geom_function()`</span> layers.</span>
<span id="cb62-696"><a href="#cb62-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-697"><a href="#cb62-697" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-698"><a href="#cb62-698" aria-hidden="true" tabindex="-1"></a>\begin{split}</span>
<span id="cb62-699"><a href="#cb62-699" aria-hidden="true" tabindex="-1"></a>\mathbf{Non\mbox{-}First~Generation:}\quad\frac{\hat\pi_i}{1 - \hat\pi_i} &amp;= e^{-5.91 + 0.51(0) + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>} <span class="sc">\\</span><span class="co">[</span><span class="ot">1ex</span><span class="co">]</span></span>
<span id="cb62-700"><a href="#cb62-700" aria-hidden="true" tabindex="-1"></a>&amp;= e^{-5.91 + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>} <span class="sc">\\</span><span class="co">[</span><span class="ot">5ex</span><span class="co">]</span></span>
<span id="cb62-701"><a href="#cb62-701" aria-hidden="true" tabindex="-1"></a>\mathbf{First~Generation:}\quad\frac{\hat\pi_i}{1 - \hat\pi_i} &amp;= e^{-5.91 + 0.51(1) + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>} <span class="sc">\\</span><span class="co">[</span><span class="ot">1ex</span><span class="co">]</span></span>
<span id="cb62-702"><a href="#cb62-702" aria-hidden="true" tabindex="-1"></a>&amp;= e^{-5.40 + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>} <span class="sc">\\</span><span class="co">[</span><span class="ot">1ex</span><span class="co">]</span></span>
<span id="cb62-703"><a href="#cb62-703" aria-hidden="true" tabindex="-1"></a>\end{split}</span>
<span id="cb62-704"><a href="#cb62-704" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-705"><a href="#cb62-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-706"><a href="#cb62-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-709"><a href="#cb62-709" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-710"><a href="#cb62-710" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-main-effects-fitted</span></span>
<span id="cb62-711"><a href="#cb62-711" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Predicted odds of obtaining a degree as a function of ACT score first generation (solid, red line) and non-first generation (dashed, blue line) students."</span></span>
<span id="cb62-712"><a href="#cb62-712" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Predicted odds of obtaining a degree as a function of ACT score first generation (solid, red line) and non-first generation (dashed, blue line) students."</span></span>
<span id="cb62-713"><a href="#cb62-713" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb62-714"><a href="#cb62-714" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb62-715"><a href="#cb62-715" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the fitted equation</span></span>
<span id="cb62-716"><a href="#cb62-716" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> grad, <span class="fu">aes</span>(<span class="at">x =</span> act, <span class="at">y =</span> got_degree)) <span class="sc">+</span></span>
<span id="cb62-717"><a href="#cb62-717" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb62-718"><a href="#cb62-718" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Non-first generation students</span></span>
<span id="cb62-719"><a href="#cb62-719" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb62-720"><a href="#cb62-720" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">5.91</span> <span class="sc">+</span> <span class="fl">2.07</span><span class="sc">*</span><span class="fu">log</span>(x))},</span>
<span id="cb62-721"><a href="#cb62-721" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"dashed"</span>,</span>
<span id="cb62-722"><a href="#cb62-722" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"blue"</span></span>
<span id="cb62-723"><a href="#cb62-723" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb62-724"><a href="#cb62-724" aria-hidden="true" tabindex="-1"></a>  <span class="co"># First generation students</span></span>
<span id="cb62-725"><a href="#cb62-725" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb62-726"><a href="#cb62-726" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">5.40</span> <span class="sc">+</span> <span class="fl">2.07</span><span class="sc">*</span><span class="fu">log</span>(x))},</span>
<span id="cb62-727"><a href="#cb62-727" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"solid"</span>,</span>
<span id="cb62-728"><a href="#cb62-728" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"red"</span></span>
<span id="cb62-729"><a href="#cb62-729" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">+</span></span>
<span id="cb62-730"><a href="#cb62-730" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb62-731"><a href="#cb62-731" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ACT score"</span>) <span class="sc">+</span></span>
<span id="cb62-732"><a href="#cb62-732" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted odds of obtaining a degree"</span>)</span>
<span id="cb62-733"><a href="#cb62-733" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-734"><a href="#cb62-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-735"><a href="#cb62-735" aria-hidden="true" tabindex="-1"></a>Here we see that the odds of graduating increase exponentially at higher ACT scores for both first generation and non-first generation students, on average. This rate of increase, however, is higher for first generation students. Moreover, first generation students have higher odds of graduating than non-first generation students, regardless of ACT score.</span>
<span id="cb62-736"><a href="#cb62-736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-737"><a href="#cb62-737" aria-hidden="true" tabindex="-1"></a>&lt;br /&gt;</span>
<span id="cb62-738"><a href="#cb62-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-739"><a href="#cb62-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-740"><a href="#cb62-740" aria-hidden="true" tabindex="-1"></a><span class="fu">### Back-Transforming to Probability</span></span>
<span id="cb62-741"><a href="#cb62-741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-742"><a href="#cb62-742" aria-hidden="true" tabindex="-1"></a>Again, while not related to the research question, we can also plot the predicted probability of graduating as a function of ACT score. Algebraically manipulating the fitted equation,</span>
<span id="cb62-743"><a href="#cb62-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-744"><a href="#cb62-744" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-745"><a href="#cb62-745" aria-hidden="true" tabindex="-1"></a>\hat\pi_i = \frac{e^{-5.91 + 0.51(\mathrm{First~Generation}_i) + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>}}{1 + e^{-5.91 + 0.51(\mathrm{First~Generation}_i) + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>}}</span>
<span id="cb62-746"><a href="#cb62-746" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-747"><a href="#cb62-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-748"><a href="#cb62-748" aria-hidden="true" tabindex="-1"></a>We can then produce the fitted equations for non-first generation and first generation students by substituting either 0 or 1, respectively, into the <span class="in">`firstgen`</span> variable. These equations are:</span>
<span id="cb62-749"><a href="#cb62-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-750"><a href="#cb62-750" aria-hidden="true" tabindex="-1"></a>**Non-First Generation Students**</span>
<span id="cb62-751"><a href="#cb62-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-752"><a href="#cb62-752" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-753"><a href="#cb62-753" aria-hidden="true" tabindex="-1"></a>\begin{split}</span>
<span id="cb62-754"><a href="#cb62-754" aria-hidden="true" tabindex="-1"></a>\hat\pi_i &amp;= \frac{e^{-5.91 + 0.51(0) + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>}}{1 + e^{-5.91 + 0.51(0) + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>}} <span class="sc">\\</span><span class="co">[</span><span class="ot">3ex</span><span class="co">]</span></span>
<span id="cb62-755"><a href="#cb62-755" aria-hidden="true" tabindex="-1"></a>&amp;= \frac{e^{-5.91 + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>}}{1 + e^{-5.91 + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>}}</span>
<span id="cb62-756"><a href="#cb62-756" aria-hidden="true" tabindex="-1"></a>\end{split}</span>
<span id="cb62-757"><a href="#cb62-757" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-758"><a href="#cb62-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-759"><a href="#cb62-759" aria-hidden="true" tabindex="-1"></a>**First Generation Students**</span>
<span id="cb62-760"><a href="#cb62-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-761"><a href="#cb62-761" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-762"><a href="#cb62-762" aria-hidden="true" tabindex="-1"></a>\begin{split}</span>
<span id="cb62-763"><a href="#cb62-763" aria-hidden="true" tabindex="-1"></a>\hat\pi_i &amp;= \frac{e^{-5.91 + 0.51(1) + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>}}{1 + e^{-5.91 + 0.51(1) + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>}} <span class="sc">\\</span><span class="co">[</span><span class="ot">1em</span><span class="co">]</span></span>
<span id="cb62-764"><a href="#cb62-764" aria-hidden="true" tabindex="-1"></a>&amp;= \frac{e^{-5.40 + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>}}{1 + e^{-5.40 + 2.07\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span>}}</span>
<span id="cb62-765"><a href="#cb62-765" aria-hidden="true" tabindex="-1"></a>\end{split}</span>
<span id="cb62-766"><a href="#cb62-766" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-767"><a href="#cb62-767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-768"><a href="#cb62-768" aria-hidden="true" tabindex="-1"></a>We can include each of these in a <span class="in">`geom_function()`</span> layer in our plot.</span>
<span id="cb62-769"><a href="#cb62-769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-770"><a href="#cb62-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-773"><a href="#cb62-773" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-774"><a href="#cb62-774" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-main-effects-fitted-prob</span></span>
<span id="cb62-775"><a href="#cb62-775" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Predicted probabilities of obtaining a degree as a function of ACT score first generation (solid, red line) and non-first generation (dashed, blue line) students."</span></span>
<span id="cb62-776"><a href="#cb62-776" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Predicted probabilities of obtaining a degree as a function of ACT score first generation (solid, red line) and non-first generation (dashed, blue line) students."</span></span>
<span id="cb62-777"><a href="#cb62-777" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb62-778"><a href="#cb62-778" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb62-779"><a href="#cb62-779" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the fitted equations</span></span>
<span id="cb62-780"><a href="#cb62-780" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> grad, <span class="fu">aes</span>(<span class="at">x =</span> act, <span class="at">y =</span> got_degree)) <span class="sc">+</span></span>
<span id="cb62-781"><a href="#cb62-781" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb62-782"><a href="#cb62-782" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Non-first generation students</span></span>
<span id="cb62-783"><a href="#cb62-783" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb62-784"><a href="#cb62-784" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">5.91</span> <span class="sc">+</span> <span class="fl">2.07</span><span class="sc">*</span><span class="fu">log</span>(x)) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">5.91</span> <span class="sc">+</span> <span class="fl">2.07</span><span class="sc">*</span><span class="fu">log</span>(x)))},</span>
<span id="cb62-785"><a href="#cb62-785" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"dashed"</span>,</span>
<span id="cb62-786"><a href="#cb62-786" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"blue"</span></span>
<span id="cb62-787"><a href="#cb62-787" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb62-788"><a href="#cb62-788" aria-hidden="true" tabindex="-1"></a>  <span class="co"># First generation students</span></span>
<span id="cb62-789"><a href="#cb62-789" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_function</span>(</span>
<span id="cb62-790"><a href="#cb62-790" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) {<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">5.40</span> <span class="sc">+</span> <span class="fl">2.07</span><span class="sc">*</span><span class="fu">log</span>(x)) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">5.40</span> <span class="sc">+</span> <span class="fl">2.07</span><span class="sc">*</span><span class="fu">log</span>(x)))},</span>
<span id="cb62-791"><a href="#cb62-791" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"solid"</span>,</span>
<span id="cb62-792"><a href="#cb62-792" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"red"</span></span>
<span id="cb62-793"><a href="#cb62-793" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb62-794"><a href="#cb62-794" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb62-795"><a href="#cb62-795" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"ACT score"</span>) <span class="sc">+</span></span>
<span id="cb62-796"><a href="#cb62-796" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Predicted probability of obtaining a degree"</span>) <span class="sc">+</span></span>
<span id="cb62-797"><a href="#cb62-797" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb62-798"><a href="#cb62-798" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-799"><a href="#cb62-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-800"><a href="#cb62-800" aria-hidden="true" tabindex="-1"></a>Here we see that the probability of graduatingobtaining a degree is positively associated with ACT score for both first generation and non-first generation students. The magnitude of the effect of ACT depends on ACT score for both groups. Although first generation students have higher probability of obtaining a degree than non-first generation students regardless of ACT score, the magnitude of this difference decreases at higher ACT scores.</span>
<span id="cb62-801"><a href="#cb62-801" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-802"><a href="#cb62-802" aria-hidden="true" tabindex="-1"></a>&lt;br /&gt;</span>
<span id="cb62-803"><a href="#cb62-803" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-804"><a href="#cb62-804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-805"><a href="#cb62-805" aria-hidden="true" tabindex="-1"></a><span class="fu">## Including Other Covariates in the Model</span></span>
<span id="cb62-806"><a href="#cb62-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-807"><a href="#cb62-807" aria-hidden="true" tabindex="-1"></a>We will now fit a series of models that systematically include the remainder of the potential covariates based on their importance. We will have to adopt the correct functional form for ALL continuous variables by examining the plots of the data and residuals from potential transformations. (NOTE: This work is not shown here, but you should undertake it.)</span>
<span id="cb62-808"><a href="#cb62-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-809"><a href="#cb62-809" aria-hidden="true" tabindex="-1"></a>The second covariate we will include is the number of AP courses taken. We use a log-transformation of this variable given its curvilinear status with the empirical log-odds of obtaining a degree. Because it has values of 0, we also add 1 before log-transforming.</span>
<span id="cb62-810"><a href="#cb62-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-813"><a href="#cb62-813" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-814"><a href="#cb62-814" aria-hidden="true" tabindex="-1"></a><span class="co"># Log-linear effect of AP courses</span></span>
<span id="cb62-815"><a href="#cb62-815" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.4</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act) <span class="sc">+</span> <span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>), <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb62-816"><a href="#cb62-816" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-817"><a href="#cb62-817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-818"><a href="#cb62-818" aria-hidden="true" tabindex="-1"></a>Next, we include scholarship amount into the model. An examination of the empirical log-odds of obtaining a degree versus scholarship amount also suggested a curvilinear relationship. We adopt a log-linear model, again adding 1 prior to transforming using the logarithm since there are 0s in the variable.</span>
<span id="cb62-819"><a href="#cb62-819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-820"><a href="#cb62-820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-823"><a href="#cb62-823" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-824"><a href="#cb62-824" aria-hidden="true" tabindex="-1"></a><span class="co"># Effect of scholarship</span></span>
<span id="cb62-825"><a href="#cb62-825" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.5</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act) <span class="sc">+</span> <span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span>  <span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>), <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb62-826"><a href="#cb62-826" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-827"><a href="#cb62-827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-828"><a href="#cb62-828" aria-hidden="true" tabindex="-1"></a>Finally, we include the effect of non-traditional student status. Since it is a dummy-coded variable, we do not have to worry about the functional form. However, since we don't know the functional form we need for scholarship amount, we will consider both when we include this covariate.</span>
<span id="cb62-829"><a href="#cb62-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-832"><a href="#cb62-832" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-833"><a href="#cb62-833" aria-hidden="true" tabindex="-1"></a><span class="co"># Effect of non-traditional student</span></span>
<span id="cb62-834"><a href="#cb62-834" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.6</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act) <span class="sc">+</span> <span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb62-835"><a href="#cb62-835" aria-hidden="true" tabindex="-1"></a>              is_nontrad, <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb62-836"><a href="#cb62-836" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-837"><a href="#cb62-837" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-838"><a href="#cb62-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-839"><a href="#cb62-839" aria-hidden="true" tabindex="-1"></a>Now we will use information criteria to select from these potential models.</span>
<span id="cb62-840"><a href="#cb62-840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-843"><a href="#cb62-843" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-844"><a href="#cb62-844" aria-hidden="true" tabindex="-1"></a><span class="fu">aictab</span>(</span>
<span id="cb62-845"><a href="#cb62-845" aria-hidden="true" tabindex="-1"></a>  <span class="at">cand.set =</span> <span class="fu">list</span>(glm<span class="fl">.2</span>, glm<span class="fl">.3</span>, glm<span class="fl">.4</span>, glm<span class="fl">.5</span>, glm<span class="fl">.6</span>),</span>
<span id="cb62-846"><a href="#cb62-846" aria-hidden="true" tabindex="-1"></a>  <span class="at">modnames =</span> <span class="fu">c</span>(<span class="st">"FG"</span>, <span class="st">"FG + ACT"</span>, <span class="st">"FG + ACT + AP"</span>, <span class="st">"FG + ACT + AP + Sch"</span>,</span>
<span id="cb62-847"><a href="#cb62-847" aria-hidden="true" tabindex="-1"></a>               <span class="st">"FG + ACT + AP + Sch + NT"</span>)</span>
<span id="cb62-848"><a href="#cb62-848" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb62-849"><a href="#cb62-849" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-850"><a href="#cb62-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-851"><a href="#cb62-851" aria-hidden="true" tabindex="-1"></a>Here the empirical evidence supports the model that includes all the covariates. Examining the binned residuals (not shown), the model does not seem adequate. Next we turn to evaluating potential interaction terms to see if that improves the residual fit.</span>
<span id="cb62-852"><a href="#cb62-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-853"><a href="#cb62-853" aria-hidden="true" tabindex="-1"></a>&lt;br /&gt;</span>
<span id="cb62-854"><a href="#cb62-854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-855"><a href="#cb62-855" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-856"><a href="#cb62-856" aria-hidden="true" tabindex="-1"></a><span class="fu">## Interaction Between ACT Score and First Generation Status</span></span>
<span id="cb62-857"><a href="#cb62-857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-858"><a href="#cb62-858" aria-hidden="true" tabindex="-1"></a>Since this is an exploratory analysis, we should only fit first-order interactions, and only with the focal predictor (i.e., first generation status). We will adopt the same modeling strategy as before, building up interaction terms in the order of covariate importance.</span>
<span id="cb62-859"><a href="#cb62-859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-862"><a href="#cb62-862" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-863"><a href="#cb62-863" aria-hidden="true" tabindex="-1"></a><span class="co"># Interaction models</span></span>
<span id="cb62-864"><a href="#cb62-864" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.7</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act) <span class="sc">+</span> <span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb62-865"><a href="#cb62-865" aria-hidden="true" tabindex="-1"></a>              is_nontrad <span class="sc">+</span> is_firstgen<span class="sc">:</span><span class="fu">log</span>(act), <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb62-866"><a href="#cb62-866" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-867"><a href="#cb62-867" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.8</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act) <span class="sc">+</span> <span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb62-868"><a href="#cb62-868" aria-hidden="true" tabindex="-1"></a>              is_nontrad <span class="sc">+</span> is_firstgen<span class="sc">:</span><span class="fu">log</span>(act) <span class="sc">+</span> is_firstgen<span class="sc">:</span><span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>),</span>
<span id="cb62-869"><a href="#cb62-869" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb62-870"><a href="#cb62-870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-871"><a href="#cb62-871" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.9</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act) <span class="sc">+</span> <span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb62-872"><a href="#cb62-872" aria-hidden="true" tabindex="-1"></a>              is_nontrad <span class="sc">+</span> is_firstgen<span class="sc">:</span><span class="fu">log</span>(act) <span class="sc">+</span> is_firstgen<span class="sc">:</span><span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb62-873"><a href="#cb62-873" aria-hidden="true" tabindex="-1"></a>              is_firstgen<span class="sc">:</span><span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>),</span>
<span id="cb62-874"><a href="#cb62-874" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb62-875"><a href="#cb62-875" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-876"><a href="#cb62-876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-877"><a href="#cb62-877" aria-hidden="true" tabindex="-1"></a>glm<span class="fl">.10</span> <span class="ot">=</span> <span class="fu">glm</span>(got_degree <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> is_firstgen <span class="sc">+</span> <span class="fu">log</span>(act) <span class="sc">+</span> <span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb62-878"><a href="#cb62-878" aria-hidden="true" tabindex="-1"></a>              is_nontrad <span class="sc">+</span> is_firstgen<span class="sc">:</span><span class="fu">log</span>(act) <span class="sc">+</span> is_firstgen<span class="sc">:</span><span class="fu">log</span>(ap_courses <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb62-879"><a href="#cb62-879" aria-hidden="true" tabindex="-1"></a>              is_firstgen<span class="sc">:</span><span class="fu">log</span>(scholarship <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">+</span> is_firstgen<span class="sc">:</span>is_nontrad,</span>
<span id="cb62-880"><a href="#cb62-880" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> grad, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb62-881"><a href="#cb62-881" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-882"><a href="#cb62-882" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate</span></span>
<span id="cb62-883"><a href="#cb62-883" aria-hidden="true" tabindex="-1"></a><span class="fu">aictab</span>(</span>
<span id="cb62-884"><a href="#cb62-884" aria-hidden="true" tabindex="-1"></a>  <span class="at">cand.set =</span> <span class="fu">list</span>(glm<span class="fl">.6</span>, glm<span class="fl">.7</span>, glm<span class="fl">.8</span>, glm<span class="fl">.9</span>, glm<span class="fl">.10</span>),</span>
<span id="cb62-885"><a href="#cb62-885" aria-hidden="true" tabindex="-1"></a>  <span class="at">modnames =</span> <span class="fu">c</span>(<span class="st">"Main Effects"</span>, <span class="st">"FG:ACT"</span>, <span class="st">"FG:ACT + FG:AP"</span>, <span class="st">"FG:ACT + FG:APP + FG:Sch"</span>,</span>
<span id="cb62-886"><a href="#cb62-886" aria-hidden="true" tabindex="-1"></a>               <span class="st">"FG:ACT + FG:APP + FG:Sch + FG:NT"</span>)</span>
<span id="cb62-887"><a href="#cb62-887" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb62-888"><a href="#cb62-888" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-889"><a href="#cb62-889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-890"><a href="#cb62-890" aria-hidden="true" tabindex="-1"></a>While the model that includes the interaction between first generation status and ACT has the most empirical evidence (given the data and candidate models), there is some degree of empirical evidence for almost all of the interaction models fitted. Evaluating the binned residuals (not shown) there is a reasonable (and roughly equal) degree of residual fit for <span class="in">`glm.7`</span>, <span class="in">`glm.8`</span>, and <span class="in">`glm.10`</span>. Given this, the information from the AICc table, and the rule of parsimony, we will adopt <span class="in">`glm.7`</span>.</span>
<span id="cb62-891"><a href="#cb62-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-894"><a href="#cb62-894" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-895"><a href="#cb62-895" aria-hidden="true" tabindex="-1"></a><span class="co"># Coefficients</span></span>
<span id="cb62-896"><a href="#cb62-896" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(glm<span class="fl">.7</span>)</span>
<span id="cb62-897"><a href="#cb62-897" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-898"><a href="#cb62-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-899"><a href="#cb62-899" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-900"><a href="#cb62-900" aria-hidden="true" tabindex="-1"></a>\begin{split}</span>
<span id="cb62-901"><a href="#cb62-901" aria-hidden="true" tabindex="-1"></a>\ln\bigg<span class="co">[</span><span class="ot">\frac{\hat\pi_i}{1 - \hat\pi_i}\bigg</span><span class="co">]</span> = &amp;-1.25 - 3.04(\mathrm{First~Gen}_i) + 0.54\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span> + 0.28\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{AP~Courses}_i + 1)\bigg</span><span class="co">]</span> +<span class="sc">\\</span></span>
<span id="cb62-902"><a href="#cb62-902" aria-hidden="true" tabindex="-1"></a>&amp; 1.11\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{Scholarship}_i + 1)\bigg</span><span class="co">]</span> - 0.83(\mathrm{Non\mbox{-}Traditional}_i) + 1.10\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i\bigg</span><span class="co">](\mathrm{First~Gen}_i)</span></span>
<span id="cb62-903"><a href="#cb62-903" aria-hidden="true" tabindex="-1"></a>\end{split}</span>
<span id="cb62-904"><a href="#cb62-904" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-905"><a href="#cb62-905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-906"><a href="#cb62-906" aria-hidden="true" tabindex="-1"></a>&lt;br /&gt;</span>
<span id="cb62-907"><a href="#cb62-907" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-908"><a href="#cb62-908" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-909"><a href="#cb62-909" aria-hidden="true" tabindex="-1"></a><span class="fu">## Interpreting the Results from the Adopted Model</span></span>
<span id="cb62-910"><a href="#cb62-910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-911"><a href="#cb62-911" aria-hidden="true" tabindex="-1"></a>To interpret these results, we will plot results freom the fitted model. In thinking about what needs to be displayed:</span>
<span id="cb62-912"><a href="#cb62-912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-913"><a href="#cb62-913" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The effect of first-generation student wil be displayed as separate lines since it is the focal predictor.</span>
<span id="cb62-914"><a href="#cb62-914" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The effect of ACT will be displayed since it is part of an interaction with the focal predictor.</span>
<span id="cb62-915"><a href="#cb62-915" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The effect of AP Courses will be controlled out by setting to its mean value.</span>
<span id="cb62-916"><a href="#cb62-916" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The effect of Scholarship will be controlled out by setting to its mean value.</span>
<span id="cb62-917"><a href="#cb62-917" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The effect of Non-traditional will be controlled by setting the value to the reference level (e.g., traditional student).^<span class="co">[</span><span class="ot">Another analyst might choose to use the non-traditional group or to show the effect by displaying both groups, perhaps in different panels.</span><span class="co">]</span></span>
<span id="cb62-918"><a href="#cb62-918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-919"><a href="#cb62-919" aria-hidden="true" tabindex="-1"></a>We next use the fitted equation to find the equations for the first and non-first generation students.</span>
<span id="cb62-920"><a href="#cb62-920" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-921"><a href="#cb62-921" aria-hidden="true" tabindex="-1"></a>**Non-First Generation Students**</span>
<span id="cb62-922"><a href="#cb62-922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-923"><a href="#cb62-923" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-924"><a href="#cb62-924" aria-hidden="true" tabindex="-1"></a>\begin{split}</span>
<span id="cb62-925"><a href="#cb62-925" aria-hidden="true" tabindex="-1"></a>\ln\bigg<span class="co">[</span><span class="ot">\frac{\hat\pi_i}{1 - \hat\pi_i}\bigg</span><span class="co">]</span> = &amp;-1.25 - 3.04(0) + 0.54\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span> + 0.28\bigg<span class="co">[</span><span class="ot">\ln(3.28 + 1)\bigg</span><span class="co">]</span> +<span class="sc">\\</span></span>
<span id="cb62-926"><a href="#cb62-926" aria-hidden="true" tabindex="-1"></a>&amp; 1.11\bigg<span class="co">[</span><span class="ot">\ln(0.18 + 1)\bigg</span><span class="co">]</span> - 0.83(0) + 1.10\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i\bigg</span><span class="co">](0)</span> <span class="sc">\\</span><span class="co">[</span><span class="ot">3ex</span><span class="co">]</span></span>
<span id="cb62-927"><a href="#cb62-927" aria-hidden="true" tabindex="-1"></a>= &amp; -0.66 + 0.54\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span></span>
<span id="cb62-928"><a href="#cb62-928" aria-hidden="true" tabindex="-1"></a>\end{split}</span>
<span id="cb62-929"><a href="#cb62-929" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-930"><a href="#cb62-930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-931"><a href="#cb62-931" aria-hidden="true" tabindex="-1"></a>**First Generation Students**</span>
<span id="cb62-932"><a href="#cb62-932" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-933"><a href="#cb62-933" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-934"><a href="#cb62-934" aria-hidden="true" tabindex="-1"></a>\begin{split}</span>
<span id="cb62-935"><a href="#cb62-935" aria-hidden="true" tabindex="-1"></a>\ln\bigg<span class="co">[</span><span class="ot">\frac{\hat\pi_i}{1 - \hat\pi_i}\bigg</span><span class="co">]</span> = &amp;-1.25 - 3.04(1) + 0.54\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span> + 0.28\bigg<span class="co">[</span><span class="ot">\ln(3.28 + 1)\bigg</span><span class="co">]</span> +<span class="sc">\\</span></span>
<span id="cb62-936"><a href="#cb62-936" aria-hidden="true" tabindex="-1"></a>&amp; 1.11\bigg<span class="co">[</span><span class="ot">\ln(0.18 + 1)\bigg</span><span class="co">]</span> - 0.83(0) + 1.10\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i\bigg</span><span class="co">](1)</span> <span class="sc">\\</span><span class="co">[</span><span class="ot">3ex</span><span class="co">]</span></span>
<span id="cb62-937"><a href="#cb62-937" aria-hidden="true" tabindex="-1"></a>= &amp; -3.70 + 1.64\bigg<span class="co">[</span><span class="ot">\ln(\mathrm{ACT~Score}_i)\bigg</span><span class="co">]</span></span>
<span id="cb62-938"><a href="#cb62-938" aria-hidden="true" tabindex="-1"></a>\end{split}</span>
<span id="cb62-939"><a href="#cb62-939" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-940"><a href="#cb62-940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-941"><a href="#cb62-941" aria-hidden="true" tabindex="-1"></a>We will plot these two equations using the probability metric.</span>
<span id="cb62-942"><a href="#cb62-942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-943"><a href="#cb62-943" aria-hidden="true" tabindex="-1"></a><span class="in">```{r fig.cap=''}</span></span>
<span id="cb62-944"><a href="#cb62-944" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: fig-interaction-fitted-prob</span></span>
<span id="cb62-945"><a href="#cb62-945" aria-hidden="true" tabindex="-1"></a><span class="in">#| fig-cap: "Predicted probability of obtaining a degree as a function of ACT score for first generation (solid, red line) and non-first generation (dashed, blue line) who ar 18 years old at the time of enrollment. The effects for the number of AP credits and scholarship amount (in thousands of dollars) were controlled by setting them to their mean values of 3.28 and 0.18, respectively."</span></span>
<span id="cb62-946"><a href="#cb62-946" aria-hidden="true" tabindex="-1"></a><span class="in">#| fig-alt: "Predicted probability of obtaining a degree as a function of ACT score for first generation (solid, red line) and non-first generation (dashed, blue line) who ar 18 years old at the time of enrollment. The effects for the number of AP credits and scholarship amount (in thousands of dollars) were controlled by setting them to their mean values of 3.28 and 0.18, respectively."</span></span>
<span id="cb62-947"><a href="#cb62-947" aria-hidden="true" tabindex="-1"></a><span class="in">#| fig-width: 8</span></span>
<span id="cb62-948"><a href="#cb62-948" aria-hidden="true" tabindex="-1"></a><span class="in">#| fig-height: 6</span></span>
<span id="cb62-949"><a href="#cb62-949" aria-hidden="true" tabindex="-1"></a><span class="in"># Plot the fitted equations</span></span>
<span id="cb62-950"><a href="#cb62-950" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot(data = grad, aes(x = act, y = got_degree)) +</span></span>
<span id="cb62-951"><a href="#cb62-951" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(alpha = 0) +</span></span>
<span id="cb62-952"><a href="#cb62-952" aria-hidden="true" tabindex="-1"></a><span class="in">  # Non-first generation students</span></span>
<span id="cb62-953"><a href="#cb62-953" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_function(</span></span>
<span id="cb62-954"><a href="#cb62-954" aria-hidden="true" tabindex="-1"></a><span class="in">    fun = function(x) {exp(-0.66 + 0.54*log(x)) / (1 + exp(-0.66 + 0.5*log(x)))},</span></span>
<span id="cb62-955"><a href="#cb62-955" aria-hidden="true" tabindex="-1"></a><span class="in">    linetype = "dashed",</span></span>
<span id="cb62-956"><a href="#cb62-956" aria-hidden="true" tabindex="-1"></a><span class="in">    color = "blue"</span></span>
<span id="cb62-957"><a href="#cb62-957" aria-hidden="true" tabindex="-1"></a><span class="in">    ) +</span></span>
<span id="cb62-958"><a href="#cb62-958" aria-hidden="true" tabindex="-1"></a><span class="in">  # First generation students</span></span>
<span id="cb62-959"><a href="#cb62-959" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_function(</span></span>
<span id="cb62-960"><a href="#cb62-960" aria-hidden="true" tabindex="-1"></a><span class="in">    fun = function(x) {exp(-3.70 + 1.64*log(x)) / (1 + exp(-3.70 + 1.647*log(x)))},</span></span>
<span id="cb62-961"><a href="#cb62-961" aria-hidden="true" tabindex="-1"></a><span class="in">    linetype = "solid",</span></span>
<span id="cb62-962"><a href="#cb62-962" aria-hidden="true" tabindex="-1"></a><span class="in">    color = "red"</span></span>
<span id="cb62-963"><a href="#cb62-963" aria-hidden="true" tabindex="-1"></a><span class="in">    ) +</span></span>
<span id="cb62-964"><a href="#cb62-964" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_light() +</span></span>
<span id="cb62-965"><a href="#cb62-965" aria-hidden="true" tabindex="-1"></a><span class="in">  xlab("ACT score") +</span></span>
<span id="cb62-966"><a href="#cb62-966" aria-hidden="true" tabindex="-1"></a><span class="in">  ylab("Predicted probability of obtaining a degree") +</span></span>
<span id="cb62-967"><a href="#cb62-967" aria-hidden="true" tabindex="-1"></a><span class="in">  ylim(0, 1)</span></span>
<span id="cb62-968"><a href="#cb62-968" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-969"><a href="#cb62-969" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-970"><a href="#cb62-970" aria-hidden="true" tabindex="-1"></a>Because our research question is about the effect of first generation status, we will focus the interpretation from this plot on that effect.</span>
<span id="cb62-971"><a href="#cb62-971" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-972"><a href="#cb62-972" aria-hidden="true" tabindex="-1"></a>Here we see that first generation status and ACT score interact on the probability of obtaining a degree. For students with lower ACT scores the probability of obtaining a degree is smaller for first generation students than for non-first generation students. However, this difference diminishes for students with higher ACT scores.</span>
<span id="cb62-973"><a href="#cb62-973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-974"><a href="#cb62-974" aria-hidden="true" tabindex="-1"></a>&lt;br /&gt;</span>
<span id="cb62-975"><a href="#cb62-975" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-976"><a href="#cb62-976" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-977"><a href="#cb62-977" aria-hidden="true" tabindex="-1"></a><span class="fu">## Presenting a Table of Logistic Regression Results</span></span>
<span id="cb62-978"><a href="#cb62-978" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-979"><a href="#cb62-979" aria-hidden="true" tabindex="-1"></a>We can present selected fitted models from the analysis in a table similar to those we have created for OLS models. In this analysis I would present <span class="in">`glm.0`</span>, <span class="in">`glm.2`</span>, <span class="in">`glm.3`</span>, <span class="in">`glm.6`</span>, and <span class="in">`glm.7`</span>. *Note that we do not have to present ALL the models we fitted in the table, only those that tell a coherent story about the analysis.* (If you are worried about transparency, you can always link to our script file or RMD document which includes all the models fitted in the paper, or include some prose that indicates there were other models fitted.) For these models, we want to report:</span>
<span id="cb62-980"><a href="#cb62-980" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-981"><a href="#cb62-981" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Coefficients and SEs</span>
<span id="cb62-982"><a href="#cb62-982" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Residual Deviance</span>
<span id="cb62-983"><a href="#cb62-983" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>AICc values (This can be computed from the *df* and residual deviances, but since it was our main criterion for model selection, it is a good idea to report it!)</span>
<span id="cb62-984"><a href="#cb62-984" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Pseudo-$R^2$ values</span>
<span id="cb62-985"><a href="#cb62-985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-986"><a href="#cb62-986" aria-hidden="true" tabindex="-1"></a>Here is a table I might present for this analysis.</span>
<span id="cb62-987"><a href="#cb62-987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-990"><a href="#cb62-990" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-991"><a href="#cb62-991" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-model-results</span></span>
<span id="cb62-992"><a href="#cb62-992" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Five candidate models predicting variation in the log-odds of obtaining a degree. The first generation and non-traditional student predictors were dummy-coded."</span></span>
<span id="cb62-993"><a href="#cb62-993" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb62-994"><a href="#cb62-994" aria-hidden="true" tabindex="-1"></a><span class="co">#| results: asis</span></span>
<span id="cb62-995"><a href="#cb62-995" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the table</span></span>
<span id="cb62-996"><a href="#cb62-996" aria-hidden="true" tabindex="-1"></a><span class="fu">htmlreg</span>(</span>
<span id="cb62-997"><a href="#cb62-997" aria-hidden="true" tabindex="-1"></a>  <span class="at">l =</span> <span class="fu">list</span>(glm<span class="fl">.0</span>, glm<span class="fl">.2</span>, glm<span class="fl">.3</span>, glm<span class="fl">.6</span>, glm<span class="fl">.7</span>),</span>
<span id="cb62-998"><a href="#cb62-998" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="fu">numeric</span>(<span class="dv">0</span>),    <span class="co">#No p-value stars</span></span>
<span id="cb62-999"><a href="#cb62-999" aria-hidden="true" tabindex="-1"></a>  <span class="at">digits =</span> <span class="dv">2</span>,</span>
<span id="cb62-1000"><a href="#cb62-1000" aria-hidden="true" tabindex="-1"></a>  <span class="at">padding =</span> <span class="dv">20</span>,          <span class="co">#Add space around columns (you may need to adjust this via trial-and-error)</span></span>
<span id="cb62-1001"><a href="#cb62-1001" aria-hidden="true" tabindex="-1"></a>  <span class="at">custom.model.names =</span> <span class="fu">c</span>(<span class="st">"Model A"</span>, <span class="st">"Model B"</span>, <span class="st">"Model C"</span>, <span class="st">"Model D"</span>, <span class="st">"Model E"</span>),</span>
<span id="cb62-1002"><a href="#cb62-1002" aria-hidden="true" tabindex="-1"></a>  <span class="at">custom.coef.names =</span> <span class="fu">c</span>(<span class="st">"Intercept"</span>, <span class="st">"First Generation"</span>, <span class="st">"ln(ACT Score)"</span>,</span>
<span id="cb62-1003"><a href="#cb62-1003" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"ln(AP Courses + 1)"</span>, <span class="st">"ln(Scholarship Amount + 1)"</span>, <span class="st">"Non-Traditional Student"</span>,</span>
<span id="cb62-1004"><a href="#cb62-1004" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"First Generation x ln(ACT Score)"</span>),</span>
<span id="cb62-1005"><a href="#cb62-1005" aria-hidden="true" tabindex="-1"></a>  <span class="at">reorder.coef =</span> <span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>, <span class="dv">1</span>), <span class="co">#Put intercept at bottom of table</span></span>
<span id="cb62-1006"><a href="#cb62-1006" aria-hidden="true" tabindex="-1"></a>  <span class="at">include.aic =</span> <span class="cn">FALSE</span>, <span class="co">#Omit AIC</span></span>
<span id="cb62-1007"><a href="#cb62-1007" aria-hidden="true" tabindex="-1"></a>  <span class="at">include.bic =</span> <span class="cn">FALSE</span>, <span class="co">#Omit BIC</span></span>
<span id="cb62-1008"><a href="#cb62-1008" aria-hidden="true" tabindex="-1"></a>  <span class="at">include.nobs =</span> <span class="cn">FALSE</span>,  <span class="co">#Omit sample size</span></span>
<span id="cb62-1009"><a href="#cb62-1009" aria-hidden="true" tabindex="-1"></a>  <span class="at">include.loglik =</span> <span class="cn">FALSE</span>,   <span class="co">#Omit log-likelihood</span></span>
<span id="cb62-1010"><a href="#cb62-1010" aria-hidden="true" tabindex="-1"></a>  <span class="at">custom.gof.rows =</span> <span class="fu">list</span>(</span>
<span id="cb62-1011"><a href="#cb62-1011" aria-hidden="true" tabindex="-1"></a>    <span class="at">AICc =</span> <span class="fu">c</span>(<span class="fu">AICc</span>(glm<span class="fl">.0</span>), <span class="fu">AICc</span>(glm<span class="fl">.2</span>), <span class="fu">AICc</span>(glm<span class="fl">.3</span>), <span class="fu">AICc</span>(glm<span class="fl">.6</span>), <span class="fu">AICc</span>(glm<span class="fl">.7</span>)),</span>
<span id="cb62-1012"><a href="#cb62-1012" aria-hidden="true" tabindex="-1"></a>    <span class="at">R2 =</span> (<span class="fl">2722.5</span> <span class="sc">-</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="fl">2662.09</span>, <span class="fl">2605.00</span>, <span class="fl">2540.35</span>, <span class="fl">2536.67</span>)) <span class="sc">/</span>  <span class="fl">2722.5</span></span>
<span id="cb62-1013"><a href="#cb62-1013" aria-hidden="true" tabindex="-1"></a>    ), <span class="co"># Add AICc values</span></span>
<span id="cb62-1014"><a href="#cb62-1014" aria-hidden="true" tabindex="-1"></a>  <span class="at">reorder.gof =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb62-1015"><a href="#cb62-1015" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="cn">NULL</span>,</span>
<span id="cb62-1016"><a href="#cb62-1016" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption.above =</span> <span class="cn">TRUE</span>, <span class="co">#Move caption above table</span></span>
<span id="cb62-1017"><a href="#cb62-1017" aria-hidden="true" tabindex="-1"></a>  <span class="at">inner.rules =</span> <span class="dv">1</span>, <span class="co">#Include line rule before model-level output</span></span>
<span id="cb62-1018"><a href="#cb62-1018" aria-hidden="true" tabindex="-1"></a>  <span class="at">outer.rules =</span> <span class="dv">1</span> , <span class="co">#Include line rules around table</span></span>
<span id="cb62-1019"><a href="#cb62-1019" aria-hidden="true" tabindex="-1"></a>  <span class="at">custom.note =</span> <span class="st">"The $R^2$ value is based on the proportion of reduced deviance from the intercept-only model (Model A)"</span></span>
<span id="cb62-1020"><a href="#cb62-1020" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-1021"><a href="#cb62-1021" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1022"><a href="#cb62-1022" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1023"><a href="#cb62-1023" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1024"><a href="#cb62-1024" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1025"><a href="#cb62-1025" aria-hidden="true" tabindex="-1"></a>:::fyi</span>
<span id="cb62-1026"><a href="#cb62-1026" aria-hidden="true" tabindex="-1"></a>**FYI**</span>
<span id="cb62-1027"><a href="#cb62-1027" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1028"><a href="#cb62-1028" aria-hidden="true" tabindex="-1"></a>Pseudo-$R^2$ values are commonly reported in applied research. Because there are many potential pseudo-$R^2$ values, you should always indicate the method used to calculate this metric.</span>
<span id="cb62-1029"><a href="#cb62-1029" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb62-1030"><a href="#cb62-1030" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1031"><a href="#cb62-1031" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1032"><a href="#cb62-1032" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1033"><a href="#cb62-1033" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1034"><a href="#cb62-1034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1035"><a href="#cb62-1035" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1036"><a href="#cb62-1036" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1037"><a href="#cb62-1037" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1038"><a href="#cb62-1038" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1039"><a href="#cb62-1039" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1040"><a href="#cb62-1040" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1041"><a href="#cb62-1041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1042"><a href="#cb62-1042" aria-hidden="true" tabindex="-1"></a></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>